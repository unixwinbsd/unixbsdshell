<!doctype html>
<html lang="ru">
  <head>
    <meta http-equiv="Content-Language" content="en">
<link rel="alternate" hreflang="en" href="https://penaadventure.com/ru/freebsd/2024/07/25/freebsd-tutorial-setuo-apache-mod-openssl-http/"/>

  <meta charset="utf-8">
  
  <title>Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS  UnixBSDShell</title>
  <meta property="og:locale" content="en">
  <meta property="og:site_name" content="UnixBSDShell">
  <meta property="og:title" content="Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS"><link rel="canonical" href="https://penaadventure.com/ru/freebsd/2024/07/25/freebsd-tutorial-setuo-apache-mod-openssl-http/">
  <meta property="og:url" content="https://penaadventure.com/ru/freebsd/2024/07/25/freebsd-tutorial-setuo-apache-mod-openssl-http/"><meta property="og:description" content="Веб-сервер Apache существует уже много лет, и теперь число его пользователей продолжает расти."><meta name="twitter:site" content="@iwanset96143401">
  <meta name="twitter:title" content="Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS">
  <meta name="twitter:description" content="Веб-сервер Apache существует уже много лет, и теперь число его пользователей продолжает расти.">
  <meta name="twitter:url" content="https://penaadventure.com/ru/freebsd/2024/07/25/freebsd-tutorial-setuo-apache-mod-openssl-http/"><meta name="twitter:card" content="summary"><meta property="og:type" content="article">
  <meta property="article:published_time" content="2024-07-25T19:00:00+03:00"><script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "",
      "url" : "https://penaadventure.com",
      "sameAs" : null
    }
  </script><meta name="google-site-verification" content="googledc9be5e5382da4fd" /><meta name="msvalidate.01" content="BCDF1444D895EBA62C6422C90DF8EA1C"><meta name="yandex-verification" content="69d778baa1dbd371">
  <link href="feed.xml" type="application/atom+xml" rel="alternate" title="UnixBSDShellFeed" />
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script>
    document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  </script>
  <!-- For all browsers -->
  <link rel="stylesheet" href="https://penaadventure.com/assets/css/main.css" />
  <meta http-equiv="cleartype" content="on" />    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000" />
    <meta name="apple-mobile-web-app-title" content="JHW Blog" />
    <meta name="application-name" content="JHW Blog" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="fediverse:creator" content="@jwildeboer@social.wildeboer.net" /><script type='text/javascript' src='//timdinosaur.com/5a/a1/16/5aa1163b15793d4f19e80dbdf2135e99.js'></script>

  <meta http-equiv="Content-Language" content="en">
<meta name="verified-code" content="7e9546f3-7a9d-4d82-b8b4-d8e51e2c6c17">
  <link rel="alternate" hreflang="en" href="https://penaadventure.com/ru/freebsd/2024/07/25/freebsd-tutorial-setuo-apache-mod-openssl-http/" />
  
<link rel="alternate" hreflang="en" href="https://penaadventure.com/en" />
<link rel="alternate" hreflang="ru" href="https://penaadventure.com/ru" />

  </head>
  <body class="layout--single">  <!--[if lt IE 9]>
  <div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
  <![endif]--><div class="masthead">
    <div class="masthead__inner-wrap">
      <div class="masthead__menu">
        <nav id="site-nav" class="greedy-nav">
          <ul class="visible-links">
            <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://penaadventure.com/">UnixBSDShell</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/about/">Me</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/year-archive/">By Year</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/categories/">Categories</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/tags/">Tags</a></li></ul>
          <ul class="hidden-links hidden"></ul>
        </nav>
      </div>
    </div>
  </div>



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://penaadventure.com/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#ru" itemprop="item"><span itemprop="name">Ru</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#freebsd" itemprop="item"><span itemprop="name">Freebsd</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#2024" itemprop="item"><span itemprop="name">2024</span></a>
          <meta itemprop="position" content="4" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#07" itemprop="item"><span itemprop="name">07</span></a>
          <meta itemprop="position" content="5" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#25" itemprop="item"><span itemprop="name">25</span></a>
          <meta itemprop="position" content="6" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS</li>
      
    
  </ol>
</nav>
<script type="application/ld+json">

{"@context":"https://schema.org",

"@graph":[

{"@type":"ProfilePage",
"@id": "https://penaadventure.com/#profilepage",
"name": {"name":"UnixBSDShell's Blog","avatar":"auth/JHW500.jpg","avataralt":"Thank you for visiting our site. Have a nice day!.","bio":"penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.","location":"Moscow, Russia"},
"url": "https://penaadventure.com/about-us",
"relatedLink": "httpss://www.github.com/unixbsdshell",
"dateCreated": "2024-07-25 19:00:00 +0300",
"datePublished": "2024-07-25 19:00:00 +0300",
"abstract": "WARNET DAPURNET leverages open-source Linux to provide educational services in Cikarang Barat, Indonesia.",

"mainEntity":[
{"@type":"Person",
"@id": "https://penaadventure.com/#person",
"name": {"name":"UnixBSDShell's Blog","avatar":"auth/JHW500.jpg","avataralt":"Thank you for visiting our site. Have a nice day!.","bio":"penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.","location":"Moscow, Russia"},
"url": "https://penaadventure.com/about-us",
"gender": "male",
"description": "Lahir di Bekasi - Jawa Barat, seorang anak laki-laki yang mendedikasikan dirinya untuk menulis berbagai artikel tentang IT.",
"alternateName": "Iwan Sting",
"additionalName": "setiawan",
"givenName": "Bata",
"familyName": "Om Iwan",
"birthDate": "1977",
"birthPlace": "Kabupaten Bekasi, Provinsi Jawa Barat, Indonesia",
"jobTitle": "Blogger Writer",
"spouse": "Siti Umaroh",  

"homeLocation": 
{ "@type": "Place",
"image": "https://lh3.googleusercontent.com/vLqLiGPo6QmAaoml2wwECAjBD_ZMivRMpakTpgCkGf-foAn3SjzMtxi-9CYKJf8aM1Zgxm8-fgpA8ar4=s265-w265-h265",
"url": "https://lh3.googleusercontent.com/vLqLiGPo6QmAaoml2wwECAjBD_ZMivRMpakTpgCkGf-foAn3SjzMtxi-9CYKJf8aM1Zgxm8-fgpA8ar4=s265-w265-h265",
"hasMap": "https://www.google.com/maps/place/WARNET+DAPURNET/@-6.2697727,107.1165375,17z/data=!3m1!4b1!4m6!3m5!1s0x2e69854270602ca7:0x71e63dfb53b7b95!8m2!3d-6.2697727!4d107.1165375!16s%2Fg%2F11fx88pw2p?entry=ttu",
"photo": "https://maps.app.goo.gl/5e3jR7dbtUypBe2Q8",
"name": "MyHome",
"description": "Dari tugu Warung Bongkok sebelum Pom Bensin/10 mtr arah timur dari tugu bambu runcing/Belakang RM. Padang Selera Bunda",
"identifier": "Tugu Bambu Runcing Warung bongkok"},
"address": {"@type": "PostalAddress",
"addressLocality": "Jawa Barat, Indonesia",
"addressRegion": "Jawa Barat",
"postalCode": "17841",
"telephone": "+62 812 8906 5249",
"email": "datainchi@gmail.com",
"streetAddress": "Jl. Raya Imam Bonjol No.86, Telagamurni, Kec. Cikarang Bar., Kabupaten Bekasi, Jawa Barat 17841"},

"image": {"@type": "ImageObject",
"width": "32",
"height": "32",
"url": "https://lh3.googleusercontent.com/a/ACg8ocINT1yW-xPXQuI4Qku0LW5-QNI-26KpzLWO9_DrPDQWSVJ8gQtu=s288-c-no"}

},

{"@context": "http://schema.org",
"@type": "EducationalOrganization",
"@id": "https://penaadventure.com/#organization",
"url": "https://www.inchimediatama.org/p/organization.html",
"identifier": "https://www.google.com/maps/place/WARNET+DAPURNET/@-6.2697727,107.1139626,17z/data=!3m1!4b1!4m6!3m5!1s0x2e69854270602ca7:0x71e63dfb53b7b95!8m2!3d-6.2697727!4d107.1165375!16s%2Fg%2F11fx88pw2p?entry=ttu/#2425380976366117670",
"name": "Inchimediatama Nusantara",
"foundingDate": "2009",
"slogan": "FreeBSD The Power To Serve",
"knowsAbout": "Tutorials UNIX BSD Linux Windows Opensource",
"knowsLanguage": ["id","en"],
"legalName" : "Inchimediatama Nusantara",
"image": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgz6JYLaq1_DkQMs0yJBpGZZve00P5m-7HPxrRIYhDdVng6kHfmZc4x9EW_vI0DyspmFsWtcMenBJzfaummNCefFmTdZr5c8M1IL9l2sufVKbaSVEQs-0feAUpmCkDu4Eo-1rCR60XZ66Ym5BFLYe2dnPHWRHqRp4-OpmJE56J9Z-zhvg/s1600/logo%20unixwinbsd.png",      
"logo": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhRDo6ylljwvU7hLVWRd9cIciBEO4sknBzOHQGECuvW5x8ZK6LuFj890M6HCZZM9j61NaqQU3DA1_SJZELqdtiIEdUejC9zkIf_lLDFFgR3dXAQ2l2lqadxk0waF_lYet5olTZX19oEbYHYJSMaBScwIACW1pGs3TtnR7ZCu7P_FqmzX61yUasXjXmPdC6l/s320/Logo%20Inchi%20copy.png",
"address": {"@type": "PostalAddress",
"addressLocality": "Jawa Barat, Indonesia",
"addressRegion": "Jawa Barat",
"addressCountry": "ID",
"postalCode": "17841",
"telephone": "+62 812 8906 5249",
"email": "datainchi@gmail.com",
"streetAddress": "Jl. Raya Imam Bonjol No.86, Telagamurni, Kec. Cikarang Bar., Kabupaten Bekasi, Jawa Barat 17841"},
"location": 
{"@type": "Place",
"geo": {"@type": "GeoCoordinates",
"latitude": "-6.2697727", "longitude": "107.1165375"}
}
}
],

"image":{"@type":"ImageObject",
"@id":"https://penaadventure.com/#logo",
"url": "https://penaadventure.com/img/logo.png",
"caption":"Inchimediatama Nusantara"}


},

{

"@type":"WebSite",
"@id":"https://penaadventure.com/#website",
"url": "https://penaadventure.com",
"inLanguage":"ru",
"name": "UnixBSDShell",
"publisher":{"@id": "https://penaadventure.com/#organization"},
"potentialAction":{"@type":"SearchAction",
"target":"https://penaadventure.com/?s={search_term_string}",
"query-input":"required name=search_term_string"}
},



{"@type":"WebPage",
"@id":"https://penaadventure.com/#webpage",
"url": "https://penaadventure.com",
"inLanguage":"ru",
"name": "Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS",
"isPartOf":
{"@id":"https://penaadventure.com/#website"},

"image": {
"@type": "ImageObject",
"@id":"https://penaadventure.com/#image",
"width": "1200",
"height": "630",
"url": "https://penaadventure.com",
"caption": "Веб-сервер Apache существует уже много лет, и теперь число его пользователей продолжает расти."
},

"datePublished": "2024-07-25 19:00:00 +0300",
"dateModified": "2024-07-25 19:00:00 +0300",
"description": "UnixBSDShell",

"breadcrumb":
{"@id":"https://penaadventure.com/#breadcrumb"}
},

{
"@type":"BreadcrumbList",
"@id":"https://penaadventure.com/#breadcrumb",
"itemListElement":[
{"@type":"ListItem",
"position":1,
"item":{"@type":"WebPage",
"@id":"https://penaadventure.com/",
"url": "https://penaadventure.com",
"name": "UnixBSDShell"
}},

{
"@type":"ListItem",
"position":2,
"item":{"@type":"WebPage",
"@id":"https://penaadventure.com/",
"url": "https://penaadventure.com/ru/freebsd/2024/07/25/freebsd-tutorial-setuo-apache-mod-openssl-http/",
"name": "Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS"
}},

{

"@type":"ListItem",
"position":3,
"item":{"@type":"WebPage",
"url": "https://penaadventure.com/ru/freebsd/2024/07/25/freebsd-tutorial-setuo-apache-mod-openssl-http/",
"name": "WebServer"
}}

]},



{  "@type": "BlogPosting",
  "url": "https://penaadventure.com/ru/freebsd/2024/07/25/freebsd-tutorial-setuo-apache-mod-openssl-http/",
  "name": "Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS",
  "headline": "Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS",
  "keywords": "WebServer",
  "description": "Веб-сервер Apache существует уже много лет, и теперь число его пользователей продолжает расти.",
  "articleBody": "Веб-сервер Apache существует уже много лет, и теперь число его пользователей продолжает расти. mod_ssl обеспечивает лучшую безопасность веб-сервера Apache и может быть установлен практически на все версии Apache и все операционные системы, такие как FreeBSD, Linux, MacOS и Windows.\n\nПротокол Secure Sockets Layer или часто называемый SSL — это протокол безопасности, который можно разместить между протоколом сетевого уровня TCP/IP и протоколом прикладного уровня HTTP. Мод SSL на Apache обеспечивает безопасную связь между клиентом и сервером. Этот мод будет выполнять аутентификацию и использовать цифровые подписи для целостности и шифрование для конфиденциальности. В настоящее время все еще используются две версии SSL, а именно версия 2 и версия 3.\n\nSSL/TLS использует криптографию с открытым ключом (PKC), известную как асимметричная криптография PKC. Криптография с открытым ключом используется в ситуациях, когда клиент и сервер не имеют общего секрета, например, между браузером и веб-сервером, но оба хотят построить систему безопасности с доверенным каналом для своих коммуникаций.\n\nКриптография с открытым ключом или PKC определяет алгоритм, который использует два ключа, каждый из которых может использоваться для шифрования сообщения. Если один ключ используется для шифрования сообщения, то другой ключ должен использоваться для его расшифровки. Этот процесс выполняется для получения защищенных сообщений путем публикации только одного ключа (открытого ключа) и сохранения другого ключа (закрытого ключа) в секрете.\n\nОткрытый ключ может быть зашифрован кем угодно, но прочитать его может только владелец закрытого ключа. Например, Мэри отправляет личное сообщение владельцу пары ключей (например, вашему веб-серверу), затем сообщение от Мэри будет зашифровано с использованием открытого ключа, опубликованного вашим сервером. Только вы можете расшифровать его, используя соответствующий закрытый ключ.\n\nРуководство в этой статье поможет вам включить SSL mod для веб-сайтов, обслуживаемых веб-серверами Apache. Содержание этой статьи сосредоточено только на создании SSL на Apache с помощью приложения OpenSSL.\n\n1. Установите OpenSSL\n\nOpenSSL — это утилита для протоколов Transport Layer Security (TLS) и Secure Sockets Layer (SSL). OpenSSL — это бесплатное приложение и наиболее широко используемая криптографическая библиотека. Основная цель создания приложений — защита соединений на серверах и в вашем программном обеспечении.\n\nПроцесс установки OpenSSL на FreeBSD довольно прост, нет никаких настроек Start up rc.d, но настройка и реализация немного сложны и иногда запутанны. Пожалуйста, используйте шаги, описанные в этой статье.\n\nroot@ns3:~ # pkg install perl5\n\n\nПосле установки Perl вы можете сразу установить OpenSSL. Мы рекомендуем использовать системные порты FreeBSD, чтобы процесс установки был более совершенным.\n\nroot@ns3:~ # cd /usr/ports/security/openssl\nroot@ns3:/usr/ports/security/openssl # make config\nroot@ns3:/usr/ports/security/openssl # make install clean\n\n\nНа FreeBSD есть много приложений, похожих на OpenSSL, например ca_root_nss, LibreSSL и другие. Чтобы FreeBSD по умолчанию использовала безопасность OpenSSL для шифрования и дешифрования, в /etc/make.conf введите следующую команду.\n\nDEFAULT_VERSIONS+=ssl=openssl\n\n\n2. Создайте файл server.crt и server.key\nПервый шаг, который вам нужно сделать, чтобы Apache мог подключиться к OpenSSL, — создать файл server.key и server.crt. Для этого мы сначала создаем папку SSL.\n\nroot@ns3:~ # cd /usr/local/etc/apache24\nroot@ns3:/usr/local/etc/apache24 # mkdir -p ssl\nroot@ns3:/usr/local/etc/apache24 # cd ssl\n\n\nСгенерируйте server.key с помощью openssl.\n\nroot@ns3:/usr/local/etc/apache24/ssl # openssl genrsa -des3 -out server.key 1024\nGenerating RSA private key, 1024 bit long modulus (2 primes)\n..+++++\n.............................................+++++\ne is 65537 (0x010001)\nEnter pass phrase for server.key:\nVerifying - Enter pass phrase for server.key:\n\n\nПриведенная выше команда создаст файл server.key и запросит пароль. Обязательно запомните этот пароль. Он вам понадобится при следующем запуске Apache.\n\nДалее создайте файл запроса сертификата, а именно “server.csr”, процесс создания этого файла будет использовать файл server.key, указанный выше.\n\nroot@ns3:/usr/local/etc/apache24/ssl # openssl req -new -key server.key -out server.csr\n\n\nПоследний шаг — создание самоподписанного SSL-сертификата (server.crt) с использованием файлов server.key и server.csr, указанных выше.\n\nroot@ns3:/usr/local/etc/apache24/ssl # openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt\n\n\n3. Включить режим SSL\nПриведенные ниже инструкции помогут вам включить режим SSL на Apache. Цель состоит в том, чтобы OpenSSL и Apache могли взаимодействовать друг с другом для защиты вашего веб-сервера.\n\nПочти во всех операционных системах файл конфигурации Apache называется “httpd.conf”, единственное отличие — расположение файла. В FreeBSD этот файл находится в каталоге “/usr/local/etc/apache24”, откройте файл и активируйте скрипт SSL в файле, как в примере ниже.\n\nLoadModule ssl_module libexec/apache24/mod_ssl.so\nLoadModule socache_shmcb_module libexec/apache24/mod_socache_shmcb.so\nInclude etc/apache24/extra/httpd-ssl.conf\n\n\nВ скрипте выше мы активируем файл httpd-ssl.conf. Откройте файл и удалите все содержимое скрипта, затем вставьте скрипт ниже в файл “/usr/local/etc/apache24/extra/httpd-ssl.conf”.\n\nListen 443\n\nSSLCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES\nSSLProxyCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES\n\nSSLHonorCipherOrder on \n\nSSLProtocol all -SSLv3\nSSLProxyProtocol all -SSLv3\n\nSSLPassPhraseDialog  builtin\nSSLSessionCache        \"shmcb:/var/run/ssl_scache(512000)\"\nSSLSessionCacheTimeout  300\n\n&lt;VirtualHost _default_:443&gt;\nDocumentRoot \"/usr/local/www/apache24/data\"\nServerName www.datainchi.com:443\nServerAdmin datainchi@gmail.com\nErrorLog \"/var/log/httpd-error.log\"\nTransferLog \"/var/log/httpd-access.log\"\n\nSSLEngine on\n\nSSLCertificateFile \"/usr/local/etc/apache24/ssl/server.crt\"\nSSLCertificateKeyFile \"/usr/local/etc/apache24/ssl/server.key\"\n\n&lt;FilesMatch \"\\.(cgi|shtml|phtml|php)$\"&gt;\n    SSLOptions +StdEnvVars\n&lt;/FilesMatch&gt;\n&lt;Directory \"/usr/local/www/apache24/cgi-bin\"&gt;\n    SSLOptions +StdEnvVars\n&lt;/Directory&gt;\n\nBrowserMatch \"MSIE [2-5]\" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0\nCustomLog \"/var/log/httpd-ssl_request.log\" \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\"\n\n&lt;/VirtualHost&gt;\n\n\nОбратите внимание на синий скрипт, скрипт — это файл OpenSSL, который мы создали выше. Чтобы протестировать все указанные выше конфигурации, перезапустите сервер Apache.\n\nroot@ns3:~ # service apache24 restart\nPerforming sanity check on apache24 configuration:\nSyntax OK\nStopping apache24.\nWaiting for PIDS: 36862.\nPerforming sanity check on apache24 configuration:\nSyntax OK\nStarting apache24.\nApache/2.4.58 mod_ssl (Pass Phrase Dialog)\nSome of your private key files are encrypted for security reasons.\nIn order to read them you have to provide the pass phrases.\n\nPrivate key www.datainchi.com:443:0 (/usr/local/etc/apache24/ssl/server.key)\nEnter pass phrase:\n\nOK: Pass Phrase Dialog successful.\n\n\nВам будет предложено ввести пароль, введите пароль из файла OpenSSL, который вы создали выше.\n\nСледующий тест — открыть веб-браузер «Google Chrome» и ввести команду «https://192.168.5.2/».\n\nВ этом руководстве показана базовая установка и использование mod_ssl на сервере Apache с OpenSSL. Несмотря на то, что команда очень проста, ее способность защищать веб-серверы очень надежна и доказана, поскольку многие люди используют OpenSSL в качестве системы безопасности SSL на серверах Apache.\n",
  "datePublished": "2024-07-25 19:00:00 +0300",
  "dateModified": "2024-07-25 19:00:00 +0300",
  "author": {
    "@type": "Person",
"@id": "https://penaadventure.com/#profilepage",
"name": {"name":"UnixBSDShell's Blog","avatar":"auth/JHW500.jpg","avataralt":"Thank you for visiting our site. Have a nice day!.","bio":"penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.","location":"Moscow, Russia"},
"url": "https://penaadventure.com/about-us",
    "email": {"uri":null,"bitbucket":null,"codeberg":null,"codepen":null,"dribbble":null,"flickr":null,"facebook":null,"foursquare":null,"github":"datainchi@gmail.com","google_plus":null,"instagram":null,"keybase":null,"lastfm":null,"linkedin":"datainchi@gmail.com","mastodon":null,"pinterest":null,"soundcloud":null,"stackoverflow":null,"steemit":null,"steam":null,"tumblr":"datainchi@gmail.com","twitter":null,"vine":null,"weibo":null,"xing":null,"youtube":"datainchi@gmail.com"}
  },
"publisher": {
"@type": "EducationalOrganization",
"@id": "https://penaadventure.com/#organization"  },



  "mainEntityOfPage": {
    "@type": "WebPage",
"@id":"https://penaadventure.com/#webpage"
  },
  "image": {
    "@type": "ImageObject",
"@id":"https://penaadventure.com/#image"
  }
}

]}</script<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SKDSF4Y03H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SKDSF4Y03H');
</script>

    <!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(95806836, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/95806836" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
 
    <!-- Clarity tracking code for https://penaadventure.com/ -->
<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "qrb63393nv");
</script>


<script type="text/javascript">
	atOptions = {
		'key' : '67fb5d6234d340006720e0f69ca5be7f',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//timdinosaur.com/67fb5d6234d340006720e0f69ca5be7f/invoke.js"></script>


<div id="main" role="main"><div class="sidebar sticky"><div itemscope itemtype="http://schema.org/Person">
  <div class="author__avatar"><img src="https://penaadventure.com/images/auth/JHW500.jpg" class="author__avatar" alt="Thank you for visiting our site. Have a nice day!."></div>
  <div class="author__content">
    <h3 class="author__name">UnixBSDShell's Blog</h3><p class="author__bio">penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.</p></div>
  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons"><li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Moscow, Russia</li></ul>
  </div>
</div></div><article class="page" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="headline" content="Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS"><meta itemprop="description" content="Веб-сервер Apache существует уже много лет, и теперь число его пользователей продолжает расти."><meta itemprop="datePublished" content="2024-07-25"><div class="page__inner-wrap"><header><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Posted:</strong> <time datetime="2024-07-25T19:00:00+03:00">2024-07-25</time> </p><h1 class="page__title" itemprop="headline">Учебное пособие по FreeBSD — настройка Apache mod OpenSSL для HTTPS
</h1></header><section class="page__content" itemprop="text">
        <p>Веб-сервер Apache существует уже много лет, и теперь число его пользователей продолжает расти. mod_ssl обеспечивает лучшую безопасность веб-сервера Apache и может быть установлен практически на все версии Apache и все операционные системы, такие как FreeBSD, Linux, MacOS и Windows.</p>

<p>Протокол Secure Sockets Layer или часто называемый SSL — это протокол безопасности, который можно разместить между протоколом сетевого уровня TCP/IP и протоколом прикладного уровня HTTP. Мод SSL на Apache обеспечивает безопасную связь между клиентом и сервером. Этот мод будет выполнять аутентификацию и использовать цифровые подписи для целостности и шифрование для конфиденциальности. В настоящее время все еще используются две версии SSL, а именно версия 2 и версия 3.</p>

<p>SSL/TLS использует криптографию с открытым ключом (PKC), известную как асимметричная криптография PKC. Криптография с открытым ключом используется в ситуациях, когда клиент и сервер не имеют общего секрета, например, между браузером и веб-сервером, но оба хотят построить систему безопасности с доверенным каналом для своих коммуникаций.</p>

<p>Криптография с открытым ключом или PKC определяет алгоритм, который использует два ключа, каждый из которых может использоваться для шифрования сообщения. Если один ключ используется для шифрования сообщения, то другой ключ должен использоваться для его расшифровки. Этот процесс выполняется для получения защищенных сообщений путем публикации только одного ключа (открытого ключа) и сохранения другого ключа (закрытого ключа) в секрете.</p>

<p>Открытый ключ может быть зашифрован кем угодно, но прочитать его может только владелец закрытого ключа. Например, Мэри отправляет личное сообщение владельцу пары ключей (например, вашему веб-серверу), затем сообщение от Мэри будет зашифровано с использованием открытого ключа, опубликованного вашим сервером. Только вы можете расшифровать его, используя соответствующий закрытый ключ.</p>

<p>Руководство в этой статье поможет вам включить SSL mod для веб-сайтов, обслуживаемых веб-серверами Apache. Содержание этой статьи сосредоточено только на создании SSL на Apache с помощью приложения OpenSSL.</p>

<h2 id="1-установите-openssl">1. Установите OpenSSL</h2>

<p>OpenSSL — это утилита для протоколов Transport Layer Security (TLS) и Secure Sockets Layer (SSL). OpenSSL — это бесплатное приложение и наиболее широко используемая криптографическая библиотека. Основная цель создания приложений — защита соединений на серверах и в вашем программном обеспечении.</p>

<p>Процесс установки OpenSSL на FreeBSD довольно прост, нет никаких настроек Start up rc.d, но настройка и реализация немного сложны и иногда запутанны. Пожалуйста, используйте шаги, описанные в этой статье.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns3:~ # pkg install perl5
</code></pre></div></div>

<p>После установки Perl вы можете сразу установить OpenSSL. Мы рекомендуем использовать системные порты FreeBSD, чтобы процесс установки был более совершенным.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns3:~ # cd /usr/ports/security/openssl
root@ns3:/usr/ports/security/openssl # make config
root@ns3:/usr/ports/security/openssl # make install clean
</code></pre></div></div>

<p>На FreeBSD есть много приложений, похожих на OpenSSL, например ca_root_nss, LibreSSL и другие. Чтобы FreeBSD по умолчанию использовала безопасность OpenSSL для шифрования и дешифрования, в /etc/make.conf введите следующую команду.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DEFAULT_VERSIONS+=ssl=openssl
</code></pre></div></div>

<h2 id="2-создайте-файл-servercrt-и-serverkey">2. Создайте файл server.crt и server.key</h2>
<p>Первый шаг, который вам нужно сделать, чтобы Apache мог подключиться к OpenSSL, — создать файл server.key и server.crt. Для этого мы сначала создаем папку SSL.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns3:~ # cd /usr/local/etc/apache24
root@ns3:/usr/local/etc/apache24 # mkdir -p ssl
root@ns3:/usr/local/etc/apache24 # cd ssl
</code></pre></div></div>

<p>Сгенерируйте server.key с помощью openssl.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns3:/usr/local/etc/apache24/ssl # openssl genrsa -des3 -out server.key 1024
Generating RSA private key, 1024 bit long modulus (2 primes)
..+++++
.............................................+++++
e is 65537 (0x010001)
Enter pass phrase for server.key:
Verifying - Enter pass phrase for server.key:
</code></pre></div></div>

<p>Приведенная выше команда создаст файл server.key и запросит пароль. Обязательно запомните этот пароль. Он вам понадобится при следующем запуске Apache.</p>

<p>Далее создайте файл запроса сертификата, а именно “server.csr”, процесс создания этого файла будет использовать файл server.key, указанный выше.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns3:/usr/local/etc/apache24/ssl # openssl req -new -key server.key -out server.csr
</code></pre></div></div>

<p>Последний шаг — создание самоподписанного SSL-сертификата (server.crt) с использованием файлов server.key и server.csr, указанных выше.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns3:/usr/local/etc/apache24/ssl # openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt
</code></pre></div></div>

<h2 id="3-включить-режим-ssl">3. Включить режим SSL</h2>
<p>Приведенные ниже инструкции помогут вам включить режим SSL на Apache. Цель состоит в том, чтобы OpenSSL и Apache могли взаимодействовать друг с другом для защиты вашего веб-сервера.</p>

<p>Почти во всех операционных системах файл конфигурации Apache называется “httpd.conf”, единственное отличие — расположение файла. В FreeBSD этот файл находится в каталоге “/usr/local/etc/apache24”, откройте файл и активируйте скрипт SSL в файле, как в примере ниже.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LoadModule ssl_module libexec/apache24/mod_ssl.so
LoadModule socache_shmcb_module libexec/apache24/mod_socache_shmcb.so
Include etc/apache24/extra/httpd-ssl.conf
</code></pre></div></div>

<p>В скрипте выше мы активируем файл httpd-ssl.conf. Откройте файл и удалите все содержимое скрипта, затем вставьте скрипт ниже в файл “/usr/local/etc/apache24/extra/httpd-ssl.conf”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Listen 443

SSLCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES
SSLProxyCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES

SSLHonorCipherOrder on 

SSLProtocol all -SSLv3
SSLProxyProtocol all -SSLv3

SSLPassPhraseDialog  builtin
SSLSessionCache        "shmcb:/var/run/ssl_scache(512000)"
SSLSessionCacheTimeout  300

&lt;VirtualHost _default_:443&gt;
DocumentRoot "/usr/local/www/apache24/data"
ServerName www.datainchi.com:443
ServerAdmin datainchi@gmail.com
ErrorLog "/var/log/httpd-error.log"
TransferLog "/var/log/httpd-access.log"

SSLEngine on

SSLCertificateFile "/usr/local/etc/apache24/ssl/server.crt"
SSLCertificateKeyFile "/usr/local/etc/apache24/ssl/server.key"

&lt;FilesMatch "\.(cgi|shtml|phtml|php)$"&gt;
    SSLOptions +StdEnvVars
&lt;/FilesMatch&gt;
&lt;Directory "/usr/local/www/apache24/cgi-bin"&gt;
    SSLOptions +StdEnvVars
&lt;/Directory&gt;

BrowserMatch "MSIE [2-5]" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0
CustomLog "/var/log/httpd-ssl_request.log" "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

&lt;/VirtualHost&gt;
</code></pre></div></div>

<p>Обратите внимание на синий скрипт, скрипт — это файл OpenSSL, который мы создали выше. Чтобы протестировать все указанные выше конфигурации, перезапустите сервер Apache.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns3:~ # service apache24 restart
Performing sanity check on apache24 configuration:
Syntax OK
Stopping apache24.
Waiting for PIDS: 36862.
Performing sanity check on apache24 configuration:
Syntax OK
Starting apache24.
Apache/2.4.58 mod_ssl (Pass Phrase Dialog)
Some of your private key files are encrypted for security reasons.
In order to read them you have to provide the pass phrases.

Private key www.datainchi.com:443:0 (/usr/local/etc/apache24/ssl/server.key)
Enter pass phrase:

OK: Pass Phrase Dialog successful.
</code></pre></div></div>

<p>Вам будет предложено ввести пароль, введите пароль из файла OpenSSL, который вы создали выше.</p>

<p>Следующий тест — открыть веб-браузер «Google Chrome» и ввести команду «https://192.168.5.2/».</p>

<p>В этом руководстве показана базовая установка и использование mod_ssl на сервере Apache с OpenSSL. Несмотря на то, что команда очень проста, ее способность защищать веб-серверы очень надежна и доказана, поскольку многие люди используют OpenSSL в качестве системы безопасности SSL на серверах Apache.</p>
</section>
      <footer class="page__meta"><script type="text/javascript">
	atOptions = {
		'key' : '9f0fbeed81ad3c9bfba81d92c5429c29',
		'format' : 'iframe',
		'height' : 60,
		'width' : 468,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//timdinosaur.com/9f0fbeed81ad3c9bfba81d92c5429c29/invoke.js"></script>


        <p class="page__date"><strong><i class="fa fa-fw fa-creative-commons" aria-hidden="true"></i> License: </strong> <a href="https://creativecommons.org/licenses/by/4.0/">By:</a> UnixBSDShell's Blog</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Posted:</strong> <time datetime="2024-07-25T19:00:00+03:00">2024-07-25</time></p><p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords"><a href="https://penaadventure.com/tags/#webserver" class="page__taxonomy-item" rel="tag">WebServer</a></span>
  </p><p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords"><a href="https://penaadventure.com/categories/#freebsd" class="page__taxonomy-item" rel="tag">FreeBSD</a><span class="sep">, </span><a href="https://penaadventure.com/categories/#ru" class="page__taxonomy-item" rel="tag">ru</a></span>
  </p></footer><nav class="pagination"><a href="https://penaadventure.com/ru/freebsd/2024/07/24/freebsd-guide-creating-custom-drupal-theme/" class="pagination--pager" title="Руководство FreeBSD по созданию пользовательской темы Drupal
">Previous</a><a href="https://penaadventure.com/ru/freebsd/2024/08/30/installation-apache-ofbiz-crm-erp-freebsd/" class="pagination--pager" title="Установка и настройка FreeBSD Apache OFBiz Crm и Erp Platform
">Next</a></nav></div>
  </article></div><div class="page__footer">
      <footer><!-- start custom footer snippets -->
<!-- end custom footer snippets --><div class="page__footer-follow">
  <ul class="social-icons"><li><a href="https://x.com/iwanset96143401"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li><li><a href="feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Atom Feed</a></li>
    <li><a href="https://penaadventure.com/about/"><i class="fa fa-fw fa-user" aria-hidden="true"></i> About Us</a></li>
  </ul>
</div>
<div class="page__footer-copyright">&copy; 2025 UnixBSDShell. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://www.inchimediatama.org/" rel="dofollow">Minimal Mistakes</a>.</div>
</footer>
    </div><script src="https://penaadventure.com/assets/js/main.min.js"></script></body>
</html>