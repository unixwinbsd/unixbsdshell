<!doctype html>
<html lang="ru">
  <head>
    <meta http-equiv="Content-Language" content="en">
<link rel="alternate" hreflang="en" href="https://penaadventure.com/ru/openbsd/2025/01/15/setup-configuration-ldap-server-on-openbsd.ru/"/>

  <meta charset="utf-8">
  
  <title>Простая настройка и конфигурирование сервера LDAP на OpenBSD  UnixBSDShell</title>
  <meta property="og:locale" content="en">
  <meta property="og:site_name" content="UnixBSDShell">
  <meta property="og:title" content="Простая настройка и конфигурирование сервера LDAP на OpenBSD"><link rel="canonical" href="https://penaadventure.com/ru/openbsd/2025/01/15/setup-configuration-ldap-server-on-openbsd.ru/">
  <meta property="og:url" content="https://penaadventure.com/ru/openbsd/2025/01/15/setup-configuration-ldap-server-on-openbsd.ru/"><meta property="og:description" content="LDAP (Lightweight Directory Access Protocol) — стандартный метод, используемый для доступа к данным в базе данных."><meta name="twitter:site" content="@iwanset96143401">
  <meta name="twitter:title" content="Простая настройка и конфигурирование сервера LDAP на OpenBSD">
  <meta name="twitter:description" content="LDAP (Lightweight Directory Access Protocol) — стандартный метод, используемый для доступа к данным в базе данных.">
  <meta name="twitter:url" content="https://penaadventure.com/ru/openbsd/2025/01/15/setup-configuration-ldap-server-on-openbsd.ru/"><meta name="twitter:card" content="summary"><meta property="og:type" content="article">
  <meta property="article:published_time" content="2025-01-15T11:00:00+03:00"><script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "",
      "url" : "https://penaadventure.com",
      "sameAs" : null
    }
  </script><meta name="google-site-verification" content="googledc9be5e5382da4fd" /><meta name="msvalidate.01" content="BCDF1444D895EBA62C6422C90DF8EA1C"><meta name="yandex-verification" content="69d778baa1dbd371">
  <link href="feed.xml" type="application/atom+xml" rel="alternate" title="UnixBSDShellFeed" />
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script>
    document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  </script>
  <!-- For all browsers -->
  <link rel="stylesheet" href="https://penaadventure.com/assets/css/main.css" />
  <meta http-equiv="cleartype" content="on" />    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000" />
    <meta name="apple-mobile-web-app-title" content="JHW Blog" />
    <meta name="application-name" content="JHW Blog" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="fediverse:creator" content="@jwildeboer@social.wildeboer.net" /><script type='text/javascript' src='//timdinosaur.com/5a/a1/16/5aa1163b15793d4f19e80dbdf2135e99.js'></script>

  <meta http-equiv="Content-Language" content="en">
<meta name="verified-code" content="7e9546f3-7a9d-4d82-b8b4-d8e51e2c6c17">
  <link rel="alternate" hreflang="en" href="https://penaadventure.com/ru/openbsd/2025/01/15/setup-configuration-ldap-server-on-openbsd.ru/" />
  
<link rel="alternate" hreflang="en" href="https://penaadventure.com/en" />
<link rel="alternate" hreflang="ru" href="https://penaadventure.com/ru" />

  </head>
  <body class="layout--single">  <!--[if lt IE 9]>
  <div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
  <![endif]--><div class="masthead">
    <div class="masthead__inner-wrap">
      <div class="masthead__menu">
        <nav id="site-nav" class="greedy-nav">
          <ul class="visible-links">
            <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://penaadventure.com/">UnixBSDShell</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/about/">Me</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/year-archive/">By Year</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/categories/">Categories</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/tags/">Tags</a></li></ul>
          <ul class="hidden-links hidden"></ul>
        </nav>
      </div>
    </div>
  </div>



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://penaadventure.com/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#ru" itemprop="item"><span itemprop="name">Ru</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#openbsd" itemprop="item"><span itemprop="name">Openbsd</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#2025" itemprop="item"><span itemprop="name">2025</span></a>
          <meta itemprop="position" content="4" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#01" itemprop="item"><span itemprop="name">01</span></a>
          <meta itemprop="position" content="5" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#15" itemprop="item"><span itemprop="name">15</span></a>
          <meta itemprop="position" content="6" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Простая настройка и конфигурирование сервера LDAP на OpenBSD</li>
      
    
  </ol>
</nav>
<script type="application/ld+json">

{"@context":"https://schema.org",

"@graph":[

{"@type":"ProfilePage",
"@id": "https://penaadventure.com/#profilepage",
"name": {"name":"UnixBSDShell's Blog","avatar":"auth/JHW500.jpg","avataralt":"Thank you for visiting our site. Have a nice day!.","bio":"penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.","location":"Moscow, Russia"},
"url": "https://penaadventure.com/about-us",
"relatedLink": "httpss://www.github.com/unixbsdshell",
"dateCreated": "2025-01-15 11:00:00 +0300",
"datePublished": "2025-01-15 11:00:00 +0300",
"abstract": "WARNET DAPURNET leverages open-source Linux to provide educational services in Cikarang Barat, Indonesia.",

"mainEntity":[
{"@type":"Person",
"@id": "https://penaadventure.com/#person",
"name": {"name":"UnixBSDShell's Blog","avatar":"auth/JHW500.jpg","avataralt":"Thank you for visiting our site. Have a nice day!.","bio":"penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.","location":"Moscow, Russia"},
"url": "https://penaadventure.com/about-us",
"gender": "male",
"description": "Lahir di Bekasi - Jawa Barat, seorang anak laki-laki yang mendedikasikan dirinya untuk menulis berbagai artikel tentang IT.",
"alternateName": "Iwan Sting",
"additionalName": "setiawan",
"givenName": "Bata",
"familyName": "Om Iwan",
"birthDate": "1977",
"birthPlace": "Kabupaten Bekasi, Provinsi Jawa Barat, Indonesia",
"jobTitle": "Blogger Writer",
"spouse": "Siti Umaroh",  

"homeLocation": 
{ "@type": "Place",
"image": "https://lh3.googleusercontent.com/vLqLiGPo6QmAaoml2wwECAjBD_ZMivRMpakTpgCkGf-foAn3SjzMtxi-9CYKJf8aM1Zgxm8-fgpA8ar4=s265-w265-h265",
"url": "https://lh3.googleusercontent.com/vLqLiGPo6QmAaoml2wwECAjBD_ZMivRMpakTpgCkGf-foAn3SjzMtxi-9CYKJf8aM1Zgxm8-fgpA8ar4=s265-w265-h265",
"hasMap": "https://www.google.com/maps/place/WARNET+DAPURNET/@-6.2697727,107.1165375,17z/data=!3m1!4b1!4m6!3m5!1s0x2e69854270602ca7:0x71e63dfb53b7b95!8m2!3d-6.2697727!4d107.1165375!16s%2Fg%2F11fx88pw2p?entry=ttu",
"photo": "https://maps.app.goo.gl/5e3jR7dbtUypBe2Q8",
"name": "MyHome",
"description": "Dari tugu Warung Bongkok sebelum Pom Bensin/10 mtr arah timur dari tugu bambu runcing/Belakang RM. Padang Selera Bunda",
"identifier": "Tugu Bambu Runcing Warung bongkok"},
"address": {"@type": "PostalAddress",
"addressLocality": "Jawa Barat, Indonesia",
"addressRegion": "Jawa Barat",
"postalCode": "17841",
"telephone": "+62 812 8906 5249",
"email": "datainchi@gmail.com",
"streetAddress": "Jl. Raya Imam Bonjol No.86, Telagamurni, Kec. Cikarang Bar., Kabupaten Bekasi, Jawa Barat 17841"},

"image": {"@type": "ImageObject",
"width": "32",
"height": "32",
"url": "https://lh3.googleusercontent.com/a/ACg8ocINT1yW-xPXQuI4Qku0LW5-QNI-26KpzLWO9_DrPDQWSVJ8gQtu=s288-c-no"}

},

{"@context": "http://schema.org",
"@type": "EducationalOrganization",
"@id": "https://penaadventure.com/#organization",
"url": "https://www.inchimediatama.org/p/organization.html",
"identifier": "https://www.google.com/maps/place/WARNET+DAPURNET/@-6.2697727,107.1139626,17z/data=!3m1!4b1!4m6!3m5!1s0x2e69854270602ca7:0x71e63dfb53b7b95!8m2!3d-6.2697727!4d107.1165375!16s%2Fg%2F11fx88pw2p?entry=ttu/#2425380976366117670",
"name": "Inchimediatama Nusantara",
"foundingDate": "2009",
"slogan": "FreeBSD The Power To Serve",
"knowsAbout": "Tutorials UNIX BSD Linux Windows Opensource",
"knowsLanguage": ["id","en"],
"legalName" : "Inchimediatama Nusantara",
"image": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgz6JYLaq1_DkQMs0yJBpGZZve00P5m-7HPxrRIYhDdVng6kHfmZc4x9EW_vI0DyspmFsWtcMenBJzfaummNCefFmTdZr5c8M1IL9l2sufVKbaSVEQs-0feAUpmCkDu4Eo-1rCR60XZ66Ym5BFLYe2dnPHWRHqRp4-OpmJE56J9Z-zhvg/s1600/logo%20unixwinbsd.png",      
"logo": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhRDo6ylljwvU7hLVWRd9cIciBEO4sknBzOHQGECuvW5x8ZK6LuFj890M6HCZZM9j61NaqQU3DA1_SJZELqdtiIEdUejC9zkIf_lLDFFgR3dXAQ2l2lqadxk0waF_lYet5olTZX19oEbYHYJSMaBScwIACW1pGs3TtnR7ZCu7P_FqmzX61yUasXjXmPdC6l/s320/Logo%20Inchi%20copy.png",
"address": {"@type": "PostalAddress",
"addressLocality": "Jawa Barat, Indonesia",
"addressRegion": "Jawa Barat",
"addressCountry": "ID",
"postalCode": "17841",
"telephone": "+62 812 8906 5249",
"email": "datainchi@gmail.com",
"streetAddress": "Jl. Raya Imam Bonjol No.86, Telagamurni, Kec. Cikarang Bar., Kabupaten Bekasi, Jawa Barat 17841"},
"location": 
{"@type": "Place",
"geo": {"@type": "GeoCoordinates",
"latitude": "-6.2697727", "longitude": "107.1165375"}
}
}
],

"image":{"@type":"ImageObject",
"@id":"https://penaadventure.com/#logo",
"url": "https://penaadventure.com/img/logo.png",
"caption":"Inchimediatama Nusantara"}


},

{

"@type":"WebSite",
"@id":"https://penaadventure.com/#website",
"url": "https://penaadventure.com",
"inLanguage":"ru",
"name": "UnixBSDShell",
"publisher":{"@id": "https://penaadventure.com/#organization"},
"potentialAction":{"@type":"SearchAction",
"target":"https://penaadventure.com/?s={search_term_string}",
"query-input":"required name=search_term_string"}
},



{"@type":"WebPage",
"@id":"https://penaadventure.com/#webpage",
"url": "https://penaadventure.com",
"inLanguage":"ru",
"name": "Простая настройка и конфигурирование сервера LDAP на OpenBSD",
"isPartOf":
{"@id":"https://penaadventure.com/#website"},

"image": {
"@type": "ImageObject",
"@id":"https://penaadventure.com/#image",
"width": "1200",
"height": "630",
"url": "https://penaadventure.com",
"caption": "LDAP (Lightweight Directory Access Protocol) — стандартный метод, используемый для доступа к данным в базе данных."
},

"datePublished": "2025-01-15 11:00:00 +0300",
"dateModified": "2025-01-15 11:00:00 +0300",
"description": "UnixBSDShell",

"breadcrumb":
{"@id":"https://penaadventure.com/#breadcrumb"}
},

{
"@type":"BreadcrumbList",
"@id":"https://penaadventure.com/#breadcrumb",
"itemListElement":[
{"@type":"ListItem",
"position":1,
"item":{"@type":"WebPage",
"@id":"https://penaadventure.com/",
"url": "https://penaadventure.com",
"name": "UnixBSDShell"
}},

{
"@type":"ListItem",
"position":2,
"item":{"@type":"WebPage",
"@id":"https://penaadventure.com/",
"url": "https://penaadventure.com/ru/openbsd/2025/01/15/setup-configuration-ldap-server-on-openbsd.ru/",
"name": "Простая настройка и конфигурирование сервера LDAP на OpenBSD"
}},

{

"@type":"ListItem",
"position":3,
"item":{"@type":"WebPage",
"url": "https://penaadventure.com/ru/openbsd/2025/01/15/setup-configuration-ldap-server-on-openbsd.ru/",
"name": "DataBase"
}}

]},



{  "@type": "BlogPosting",
  "url": "https://penaadventure.com/ru/openbsd/2025/01/15/setup-configuration-ldap-server-on-openbsd.ru/",
  "name": "Простая настройка и конфигурирование сервера LDAP на OpenBSD",
  "headline": "Простая настройка и конфигурирование сервера LDAP на OpenBSD",
  "keywords": "DataBase",
  "description": "LDAP (Lightweight Directory Access Protocol) — стандартный метод, используемый для доступа к данным в базе данных.",
  "articleBody": "Допустим, у вас есть несколько учетных записей пользователей, которые вы хотите синхронизировать между несколькими системами и другими службами приложений. Как это сделать? Возможно ли это вообще? Чтобы ответить на эти вопросы, вы можете использовать Ansible/Puppet/Chef или более продвинутые скрипты. Или мы можем решить эту проблему и объединить системы и службы в одном месте. Это место — LDAP!.\n\nLDAP (Lightweight Directory Access Protocol) — это стандартный метод, используемый для доступа к данным в базах данных. Хотя LDAP на самом деле не является базой данных. Что именно представляет собой база данных? В этой статье мы не будем обсуждать базы данных. Хотя есть много причин, по которым вы не захотите использовать LDAP, одним из аргументов в пользу его использования является то, что почти любая служба, в которой вы хотите пройти аутентификацию, может взаимодействовать с сервером LDAP.\n\nВ этом руководстве мы расскажем вам, как установить OpenLDAP на OpenBSD. OpenLDAP — это программный пакет с открытым исходным кодом, предоставляющий службы каталогов, аналогичные Microsoft Active Directory. OpenLDAP — это легкая, безопасная и масштабируемая служба каталогов, которую можно использовать для управления учетными записями пользователей и контроля доступа к приложениям.\n\n1. Подготовка\nПервое, что необходимо сделать, это подготовить сервер и базу данных. И первое, что нужно сделать в настройке сервера — это указать доменное имя. В этой статье мы будем использовать общеупотребимое доменное имя «example.com».\n\nВ первой части мы импортируем схему, которая будет использоваться. Схема в LDAP похожа на определение таблицы/столбца в SQL. Схема сообщает LDAP-серверу, какие столбцы могут существовать, как идентифицировать и обрабатывать каждый столбец (чувствителен ли он к регистру, может ли он повторяться и т. д.). Приведенная ниже схема является схемой по умолчанию, включенной в операционную систему OpenBSD. При необходимости вы также можете добавить дополнительные схемы.\n\nschema “/etc/ldap/core.schema”\nschema “/etc/ldap/inetorgperson.schema”\nschema “/etc/ldap/nis.schema”\nschema “/etc/ldap/bsd.schema”\n\nДалее мы определим интерфейс, который будет использовать LDAP. В этой статье LDAP будет прослушивать интерфейс обратной связи и отмечать его как безопасный. Это позволяет нам проводить аутентификацию с помощью простого текстового пароля. (Это может быть полезно для тестирования) Мы также будем прослушивать внешний интерфейс, в данном примере vio0, и при необходимости потребуем LDAPS.\n\nlisten on lo0 secure\nlisten on “/var/run/ldapi”\nlisten on vio0 ldaps certificate \n\nВ приведенном выше примере скрипта LDAP требует сертификат. Мы предполагаем, что сертификаты хранятся в каталоге /etc/ldap/certs. Убедитесь, что каталог недоступен для чтения ни группе, ни кому-либо другому. Если сертификат уже есть в /etc/ssl, то можно создать простую символическую ссылку на сертификат и ключ.\n\nfoo# chmod 700 /etc/ldap/certs\nfoo# ln -s /etc/ssl/&lt;hostname&gt;.crt /etc/ldap/certs/&lt;hostname&gt;.crt\nfoo# ln -s /etc/ssl/private/&lt;hostname&gt;.key /etc/ldap/certs/&lt;hostname&gt;.key\n\n\nСледующий шаг — нам нужно место для хранения информации. Нам нужно «создать» базу данных. Вот некоторые важные вещи, на которые следует обратить внимание:\n\nА) Мы указываем домен в формате LDAP, используя синтаксис dc=example,dc=com. Со временем ввод этого текста станет очень утомительным. К счастью, у меня есть несколько сценариев, которые могут помочь.\n\nБ) Пароль rootpw может быть открытым текстом, но это не обязательно. Использование скрипта salted_passwd.sh создаст для вас соленый хэш SHA1.\n\nfoo# salted_passwd.sh\nenter password (will not echo): letmein\n{SSHA}vpeFJlj9iz/2UqQ0eGcU9PzeP/lyVG1VQWV3Qg==\n\n\nnamespace \"dc=example,dc=com\" {\n        rootdn          \"cn=admin,dc=example,dc=com\"\n        rootpw          \"{SSHA}vpeFJlj9iz/2UqQ0eGcU9PzeP/lyVG1VQWV3Qg==\"\n        index           sn\n        index           givenName\n        index           cn\n        index           mail\n        index           ou\n}\n\n\n2. Процесс установки OpenLDAP\nОткройте окно терминала и введите следующую команду для установки OpenLDAP в OpenBSD:\n\nfoo# pkg_add openldap-server\n\n\nПосле загрузки пакета система попросит вас ответить на несколько вопросов по конфигурации. Параметры по умолчанию должны подойти для большинства случаев. Вы можете нажать Enter, чтобы выбрать вариант ответа по умолчанию для каждого вопроса.\n\nЕсли вам позже потребуется изменить конфигурацию, вы можете использовать следующую команду:\n\nfoo# nano /etc/openldap/slapd.conf\n\n\n3. Запуск OpenLDAP\nЧтобы запустить сервер OpenLDAP в OpenBSD, выполните следующую команду.\n\nfoo# /etc/rc.d/slapd start\n\n\nЧтобы остановить сервер OpenLDAP, используйте следующую команду.\n\nfoo# /etc/rc.d/slapd stop\n\n\nЧтобы перезапустить сервер OpenLDAP, используйте следующую команду.\n\nfoo# /etc/rc.d/slapd restart\n\n\nЧтобы проверить, установлен ли OpenLDAP и работает ли он должным образом, используйте следующую команду для проверки состояния сервера OpenLDAP.\n\nfoo# ldapctl status\n\n\nВы также можете протестировать установку, создав нового пользователя в базе данных OpenLDAP. Для создания нового пользователя используйте следующую команду.\n\nfoo# ldapadd -x -D \"cn=admin,dc=example,dc=com\" -W -f /usr/local/share/examples/openldap/ldif/user.ldif\n\n\nЕсли вы дочитали до этого места, спасибо за прочтение моей статьи. Надеюсь, вы сможете настроить простой LDAP-сервер, позволяющий объединить учетные записи пользователей в одном месте.\n",
  "datePublished": "2025-01-15 11:00:00 +0300",
  "dateModified": "2025-01-15 11:00:00 +0300",
  "author": {
    "@type": "Person",
"@id": "https://penaadventure.com/#profilepage",
"name": {"name":"UnixBSDShell's Blog","avatar":"auth/JHW500.jpg","avataralt":"Thank you for visiting our site. Have a nice day!.","bio":"penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.","location":"Moscow, Russia"},
"url": "https://penaadventure.com/about-us",
    "email": {"uri":null,"bitbucket":null,"codeberg":null,"codepen":null,"dribbble":null,"flickr":null,"facebook":null,"foursquare":null,"github":"datainchi@gmail.com","google_plus":null,"instagram":null,"keybase":null,"lastfm":null,"linkedin":"datainchi@gmail.com","mastodon":null,"pinterest":null,"soundcloud":null,"stackoverflow":null,"steemit":null,"steam":null,"tumblr":"datainchi@gmail.com","twitter":null,"vine":null,"weibo":null,"xing":null,"youtube":"datainchi@gmail.com"}
  },
"publisher": {
"@type": "EducationalOrganization",
"@id": "https://penaadventure.com/#organization"  },



  "mainEntityOfPage": {
    "@type": "WebPage",
"@id":"https://penaadventure.com/#webpage"
  },
  "image": {
    "@type": "ImageObject",
"@id":"https://penaadventure.com/#image"
  }
}

]}</script<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SKDSF4Y03H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SKDSF4Y03H');
</script>

    <!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(95806836, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/95806836" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
 
    <!-- Clarity tracking code for https://penaadventure.com/ -->
<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "qrb63393nv");
</script>


<script type="text/javascript">
	atOptions = {
		'key' : '67fb5d6234d340006720e0f69ca5be7f',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//timdinosaur.com/67fb5d6234d340006720e0f69ca5be7f/invoke.js"></script>


<div id="main" role="main"><div class="sidebar sticky"><div itemscope itemtype="http://schema.org/Person">
  <div class="author__avatar"><img src="https://penaadventure.com/images/auth/JHW500.jpg" class="author__avatar" alt="Thank you for visiting our site. Have a nice day!."></div>
  <div class="author__content">
    <h3 class="author__name">UnixBSDShell's Blog</h3><p class="author__bio">penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.</p></div>
  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons"><li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Moscow, Russia</li></ul>
  </div>
</div></div><article class="page" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="headline" content="Простая настройка и конфигурирование сервера LDAP на OpenBSD"><meta itemprop="description" content="LDAP (Lightweight Directory Access Protocol) — стандартный метод, используемый для доступа к данным в базе данных."><meta itemprop="datePublished" content="2025-01-15"><div class="page__inner-wrap"><header><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Posted:</strong> <time datetime="2025-01-15T11:00:00+03:00">2025-01-15</time> </p><h1 class="page__title" itemprop="headline">Простая настройка и конфигурирование сервера LDAP на OpenBSD
</h1></header><section class="page__content" itemprop="text">
        <p>Допустим, у вас есть несколько учетных записей пользователей, которые вы хотите синхронизировать между несколькими системами и другими службами приложений. Как это сделать? Возможно ли это вообще? Чтобы ответить на эти вопросы, вы можете использовать Ansible/Puppet/Chef или более продвинутые скрипты. Или мы можем решить эту проблему и объединить системы и службы в одном месте. Это место — LDAP!.</p>

<p>LDAP (Lightweight Directory Access Protocol) — это стандартный метод, используемый для доступа к данным в базах данных. Хотя LDAP на самом деле не является базой данных. Что именно представляет собой база данных? В этой статье мы не будем обсуждать базы данных. Хотя есть много причин, по которым вы не захотите использовать LDAP, одним из аргументов в пользу его использования является то, что почти любая служба, в которой вы хотите пройти аутентификацию, может взаимодействовать с сервером LDAP.</p>

<p>В этом руководстве мы расскажем вам, как установить OpenLDAP на OpenBSD. OpenLDAP — это программный пакет с открытым исходным кодом, предоставляющий службы каталогов, аналогичные Microsoft Active Directory. OpenLDAP — это легкая, безопасная и масштабируемая служба каталогов, которую можно использовать для управления учетными записями пользователей и контроля доступа к приложениям.</p>

<h2 id="1-подготовка">1. Подготовка</h2>
<p>Первое, что необходимо сделать, это подготовить сервер и базу данных. И первое, что нужно сделать в настройке сервера — это указать доменное имя. В этой статье мы будем использовать общеупотребимое доменное имя «example.com».</p>

<p>В первой части мы импортируем схему, которая будет использоваться. Схема в LDAP похожа на определение таблицы/столбца в SQL. Схема сообщает LDAP-серверу, какие столбцы могут существовать, как идентифицировать и обрабатывать каждый столбец (чувствителен ли он к регистру, может ли он повторяться и т. д.). Приведенная ниже схема является схемой по умолчанию, включенной в операционную систему OpenBSD. При необходимости вы также можете добавить дополнительные схемы.</p>

<p>schema “/etc/ldap/core.schema”
schema “/etc/ldap/inetorgperson.schema”
schema “/etc/ldap/nis.schema”
schema “/etc/ldap/bsd.schema”</p>

<p>Далее мы определим интерфейс, который будет использовать LDAP. В этой статье LDAP будет прослушивать интерфейс обратной связи и отмечать его как безопасный. Это позволяет нам проводить аутентификацию с помощью простого текстового пароля. (Это может быть полезно для тестирования) Мы также будем прослушивать внешний интерфейс, в данном примере vio0, и при необходимости потребуем LDAPS.</p>

<p>listen on lo0 secure
listen on “/var/run/ldapi”
listen on vio0 ldaps certificate <hostname></hostname></p>

<p>В приведенном выше примере скрипта LDAP требует сертификат. Мы предполагаем, что сертификаты хранятся в каталоге /etc/ldap/certs. Убедитесь, что каталог недоступен для чтения ни группе, ни кому-либо другому. Если сертификат уже есть в /etc/ssl, то можно создать простую символическую ссылку на сертификат и ключ.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo# chmod 700 /etc/ldap/certs
foo# ln -s /etc/ssl/&lt;hostname&gt;.crt /etc/ldap/certs/&lt;hostname&gt;.crt
foo# ln -s /etc/ssl/private/&lt;hostname&gt;.key /etc/ldap/certs/&lt;hostname&gt;.key
</code></pre></div></div>

<p>Следующий шаг — нам нужно место для хранения информации. Нам нужно «создать» базу данных. Вот некоторые важные вещи, на которые следует обратить внимание:</p>

<p>А) Мы указываем домен в формате LDAP, используя синтаксис dc=example,dc=com. Со временем ввод этого текста станет очень утомительным. К счастью, у меня есть несколько сценариев, которые могут помочь.</p>

<p>Б) Пароль rootpw может быть открытым текстом, но это не обязательно. Использование скрипта salted_passwd.sh создаст для вас соленый хэш SHA1.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo# salted_passwd.sh
enter password (will not echo): letmein
{SSHA}vpeFJlj9iz/2UqQ0eGcU9PzeP/lyVG1VQWV3Qg==
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>namespace "dc=example,dc=com" {
        rootdn          "cn=admin,dc=example,dc=com"
        rootpw          "{SSHA}vpeFJlj9iz/2UqQ0eGcU9PzeP/lyVG1VQWV3Qg=="
        index           sn
        index           givenName
        index           cn
        index           mail
        index           ou
}
</code></pre></div></div>

<h2 id="2-процесс-установки-openldap">2. Процесс установки OpenLDAP</h2>
<p>Откройте окно терминала и введите следующую команду для установки OpenLDAP в OpenBSD:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo# pkg_add openldap-server
</code></pre></div></div>

<p>После загрузки пакета система попросит вас ответить на несколько вопросов по конфигурации. Параметры по умолчанию должны подойти для большинства случаев. Вы можете нажать Enter, чтобы выбрать вариант ответа по умолчанию для каждого вопроса.</p>

<p>Если вам позже потребуется изменить конфигурацию, вы можете использовать следующую команду:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo# nano /etc/openldap/slapd.conf
</code></pre></div></div>

<h2 id="3-запуск-openldap">3. Запуск OpenLDAP</h2>
<p>Чтобы запустить сервер OpenLDAP в OpenBSD, выполните следующую команду.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo# /etc/rc.d/slapd start
</code></pre></div></div>

<p>Чтобы остановить сервер OpenLDAP, используйте следующую команду.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo# /etc/rc.d/slapd stop
</code></pre></div></div>

<p>Чтобы перезапустить сервер OpenLDAP, используйте следующую команду.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo# /etc/rc.d/slapd restart
</code></pre></div></div>

<p>Чтобы проверить, установлен ли OpenLDAP и работает ли он должным образом, используйте следующую команду для проверки состояния сервера OpenLDAP.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo# ldapctl status
</code></pre></div></div>

<p>Вы также можете протестировать установку, создав нового пользователя в базе данных OpenLDAP. Для создания нового пользователя используйте следующую команду.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo# ldapadd -x -D "cn=admin,dc=example,dc=com" -W -f /usr/local/share/examples/openldap/ldif/user.ldif
</code></pre></div></div>

<p>Если вы дочитали до этого места, спасибо за прочтение моей статьи. Надеюсь, вы сможете настроить простой LDAP-сервер, позволяющий объединить учетные записи пользователей в одном месте.</p>
</section>
      <footer class="page__meta"><script type="text/javascript">
	atOptions = {
		'key' : '9f0fbeed81ad3c9bfba81d92c5429c29',
		'format' : 'iframe',
		'height' : 60,
		'width' : 468,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//timdinosaur.com/9f0fbeed81ad3c9bfba81d92c5429c29/invoke.js"></script>


        <p class="page__date"><strong><i class="fa fa-fw fa-creative-commons" aria-hidden="true"></i> License: </strong> <a href="https://creativecommons.org/licenses/by/4.0/">By:</a> UnixBSDShell's Blog</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Posted:</strong> <time datetime="2025-01-15T11:00:00+03:00">2025-01-15</time></p><p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords"><a href="https://penaadventure.com/tags/#database" class="page__taxonomy-item" rel="tag">DataBase</a></span>
  </p><p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords"><a href="https://penaadventure.com/categories/#openbsd" class="page__taxonomy-item" rel="tag">OpenBSD</a><span class="sep">, </span><a href="https://penaadventure.com/categories/#ru" class="page__taxonomy-item" rel="tag">ru</a></span>
  </p></footer><nav class="pagination"><a href="https://penaadventure.com/en/freebsd/2025/01/14/install-aria2-metalink-freebsd-torrent/" class="pagination--pager" title="Aria2 Metalink Guide On FreeBSD To Download Torrent Files
">Previous</a><a href="https://penaadventure.com/ru/linux/2025/01/16/setup-and-install-anaconda-navigator-ubuntu/" class="pagination--pager" title="Как установить и использовать Anaconda Navigator
">Next</a></nav></div>
  </article></div><div class="page__footer">
      <footer><!-- start custom footer snippets -->
<!-- end custom footer snippets --><div class="page__footer-follow">
  <ul class="social-icons"><li><a href="https://x.com/iwanset96143401"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li><li><a href="feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Atom Feed</a></li>
    <li><a href="https://penaadventure.com/about/"><i class="fa fa-fw fa-user" aria-hidden="true"></i> About Us</a></li>
  </ul>
</div>
<div class="page__footer-copyright">&copy; 2025 UnixBSDShell. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://www.inchimediatama.org/" rel="dofollow">Minimal Mistakes</a>.</div>
</footer>
    </div><script src="https://penaadventure.com/assets/js/main.min.js"></script></body>
</html>