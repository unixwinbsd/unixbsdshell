<!doctype html>
<html lang="ru">
  <head>
    <meta http-equiv="Content-Language" content="en">
<link rel="alternate" hreflang="en" href="https://penaadventure.com/ru/linux/2024/03/16/freebsd-install-ubuntu-linux-binary/"/>

  <meta charset="utf-8">
  
  <title>            Как установить Ubuntu на FreeBSD      Совместимость двоичных файлов Linux  UnixBSDShell      </title>
  <meta property="og:locale" content="en">
  <meta property="og:site_name" content="UnixBSDShell">
  <meta property="og:title" content="            Как установить Ubuntu на FreeBSD      Совместимость двоичных файлов Linux      "><link rel="canonical" href="https://penaadventure.com/ru/linux/2024/03/16/freebsd-install-ubuntu-linux-binary/">
  <meta property="og:url" content="https://penaadventure.com/ru/linux/2024/03/16/freebsd-install-ubuntu-linux-binary/"><meta property="og:description" content="Встроенная в FreeBSD двоичная совместимость Linux позволяет пользователям FreeBSD, работающим на 32-битной архитектуре i386, 64-битной архитектуре amd64 или 64-битной архитектуре arm64"><meta name="twitter:site" content="@iwanset96143401">
  <meta name="twitter:title" content="            Как установить Ubuntu на FreeBSD      Совместимость двоичных файлов Linux      ">
  <meta name="twitter:description" content="Встроенная в FreeBSD двоичная совместимость Linux позволяет пользователям FreeBSD, работающим на 32-битной архитектуре i386, 64-битной архитектуре amd64 или 64-битной архитектуре arm64">
  <meta name="twitter:url" content="https://penaadventure.com/ru/linux/2024/03/16/freebsd-install-ubuntu-linux-binary/"><meta name="twitter:card" content="summary"><meta property="og:type" content="article">
  <meta property="article:published_time" content="2024-03-16T14:15:00+03:00"><script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "",
      "url" : "https://penaadventure.com",
      "sameAs" : null
    }
  </script><meta name="google-site-verification" content="googledc9be5e5382da4fd" /><meta name="msvalidate.01" content="BCDF1444D895EBA62C6422C90DF8EA1C"><meta name="yandex-verification" content="69d778baa1dbd371">
  <link href="feed.xml" type="application/atom+xml" rel="alternate" title="UnixBSDShellFeed" />
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script>
    document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  </script>
  <!-- For all browsers -->
  <link rel="stylesheet" href="https://penaadventure.com/assets/css/main.css" />
  <meta http-equiv="cleartype" content="on" />    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000" />
    <meta name="apple-mobile-web-app-title" content="JHW Blog" />
    <meta name="application-name" content="JHW Blog" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="fediverse:creator" content="@jwildeboer@social.wildeboer.net" /><script type='text/javascript' src='//timdinosaur.com/5a/a1/16/5aa1163b15793d4f19e80dbdf2135e99.js'></script>

  <meta http-equiv="Content-Language" content="en">
<meta name="verified-code" content="7e9546f3-7a9d-4d82-b8b4-d8e51e2c6c17">
  <link rel="alternate" hreflang="en" href="https://penaadventure.com/ru/linux/2024/03/16/freebsd-install-ubuntu-linux-binary/" />
  
<link rel="alternate" hreflang="en" href="https://penaadventure.com/en" />
<link rel="alternate" hreflang="ru" href="https://penaadventure.com/ru" />

  </head>
  <body class="layout--single">  <!--[if lt IE 9]>
  <div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
  <![endif]--><div class="masthead">
    <div class="masthead__inner-wrap">
      <div class="masthead__menu">
        <nav id="site-nav" class="greedy-nav">
          <ul class="visible-links">
            <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://penaadventure.com/">UnixBSDShell</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/about/">Me</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/year-archive/">By Year</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/categories/">Categories</a></li><li class="masthead__menu-item"><a href="https://penaadventure.com/tags/">Tags</a></li></ul>
          <ul class="hidden-links hidden"></ul>
        </nav>
      </div>
    </div>
  </div>



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://penaadventure.com/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#ru" itemprop="item"><span itemprop="name">Ru</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#linux" itemprop="item"><span itemprop="name">Linux</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#2024" itemprop="item"><span itemprop="name">2024</span></a>
          <meta itemprop="position" content="4" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#03" itemprop="item"><span itemprop="name">03</span></a>
          <meta itemprop="position" content="5" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#16" itemprop="item"><span itemprop="name">16</span></a>
          <meta itemprop="position" content="6" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Как установить Ubuntu на FreeBSD | Совместимость двоичных файлов Linux</li>
      
    
  </ol>
</nav>
<script type="application/ld+json">

{"@context":"https://schema.org",

"@graph":[

{"@type":"ProfilePage",
"@id": "https://penaadventure.com/#profilepage",
"name": {"name":"UnixBSDShell's Blog","avatar":"auth/JHW500.jpg","avataralt":"Thank you for visiting our site. Have a nice day!.","bio":"penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.","location":"Moscow, Russia"},
"url": "https://penaadventure.com/about-us",
"relatedLink": "httpss://www.github.com/unixbsdshell",
"dateCreated": "2024-03-16 14:15:00 +0300",
"datePublished": "2024-03-16 14:15:00 +0300",
"abstract": "WARNET DAPURNET leverages open-source Linux to provide educational services in Cikarang Barat, Indonesia.",

"mainEntity":[
{"@type":"Person",
"@id": "https://penaadventure.com/#person",
"name": {"name":"UnixBSDShell's Blog","avatar":"auth/JHW500.jpg","avataralt":"Thank you for visiting our site. Have a nice day!.","bio":"penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.","location":"Moscow, Russia"},
"url": "https://penaadventure.com/about-us",
"gender": "male",
"description": "Lahir di Bekasi - Jawa Barat, seorang anak laki-laki yang mendedikasikan dirinya untuk menulis berbagai artikel tentang IT.",
"alternateName": "Iwan Sting",
"additionalName": "setiawan",
"givenName": "Bata",
"familyName": "Om Iwan",
"birthDate": "1977",
"birthPlace": "Kabupaten Bekasi, Provinsi Jawa Barat, Indonesia",
"jobTitle": "Blogger Writer",
"spouse": "Siti Umaroh",  

"homeLocation": 
{ "@type": "Place",
"image": "https://lh3.googleusercontent.com/vLqLiGPo6QmAaoml2wwECAjBD_ZMivRMpakTpgCkGf-foAn3SjzMtxi-9CYKJf8aM1Zgxm8-fgpA8ar4=s265-w265-h265",
"url": "https://lh3.googleusercontent.com/vLqLiGPo6QmAaoml2wwECAjBD_ZMivRMpakTpgCkGf-foAn3SjzMtxi-9CYKJf8aM1Zgxm8-fgpA8ar4=s265-w265-h265",
"hasMap": "https://www.google.com/maps/place/WARNET+DAPURNET/@-6.2697727,107.1165375,17z/data=!3m1!4b1!4m6!3m5!1s0x2e69854270602ca7:0x71e63dfb53b7b95!8m2!3d-6.2697727!4d107.1165375!16s%2Fg%2F11fx88pw2p?entry=ttu",
"photo": "https://maps.app.goo.gl/5e3jR7dbtUypBe2Q8",
"name": "MyHome",
"description": "Dari tugu Warung Bongkok sebelum Pom Bensin/10 mtr arah timur dari tugu bambu runcing/Belakang RM. Padang Selera Bunda",
"identifier": "Tugu Bambu Runcing Warung bongkok"},
"address": {"@type": "PostalAddress",
"addressLocality": "Jawa Barat, Indonesia",
"addressRegion": "Jawa Barat",
"postalCode": "17841",
"telephone": "+62 812 8906 5249",
"email": "datainchi@gmail.com",
"streetAddress": "Jl. Raya Imam Bonjol No.86, Telagamurni, Kec. Cikarang Bar., Kabupaten Bekasi, Jawa Barat 17841"},

"image": {"@type": "ImageObject",
"width": "32",
"height": "32",
"url": "https://lh3.googleusercontent.com/a/ACg8ocINT1yW-xPXQuI4Qku0LW5-QNI-26KpzLWO9_DrPDQWSVJ8gQtu=s288-c-no"}

},

{"@context": "http://schema.org",
"@type": "EducationalOrganization",
"@id": "https://penaadventure.com/#organization",
"url": "https://www.inchimediatama.org/p/organization.html",
"identifier": "https://www.google.com/maps/place/WARNET+DAPURNET/@-6.2697727,107.1139626,17z/data=!3m1!4b1!4m6!3m5!1s0x2e69854270602ca7:0x71e63dfb53b7b95!8m2!3d-6.2697727!4d107.1165375!16s%2Fg%2F11fx88pw2p?entry=ttu/#2425380976366117670",
"name": "Inchimediatama Nusantara",
"foundingDate": "2009",
"slogan": "FreeBSD The Power To Serve",
"knowsAbout": "Tutorials UNIX BSD Linux Windows Opensource",
"knowsLanguage": ["id","en"],
"legalName" : "Inchimediatama Nusantara",
"image": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgz6JYLaq1_DkQMs0yJBpGZZve00P5m-7HPxrRIYhDdVng6kHfmZc4x9EW_vI0DyspmFsWtcMenBJzfaummNCefFmTdZr5c8M1IL9l2sufVKbaSVEQs-0feAUpmCkDu4Eo-1rCR60XZ66Ym5BFLYe2dnPHWRHqRp4-OpmJE56J9Z-zhvg/s1600/logo%20unixwinbsd.png",      
"logo": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhRDo6ylljwvU7hLVWRd9cIciBEO4sknBzOHQGECuvW5x8ZK6LuFj890M6HCZZM9j61NaqQU3DA1_SJZELqdtiIEdUejC9zkIf_lLDFFgR3dXAQ2l2lqadxk0waF_lYet5olTZX19oEbYHYJSMaBScwIACW1pGs3TtnR7ZCu7P_FqmzX61yUasXjXmPdC6l/s320/Logo%20Inchi%20copy.png",
"address": {"@type": "PostalAddress",
"addressLocality": "Jawa Barat, Indonesia",
"addressRegion": "Jawa Barat",
"addressCountry": "ID",
"postalCode": "17841",
"telephone": "+62 812 8906 5249",
"email": "datainchi@gmail.com",
"streetAddress": "Jl. Raya Imam Bonjol No.86, Telagamurni, Kec. Cikarang Bar., Kabupaten Bekasi, Jawa Barat 17841"},
"location": 
{"@type": "Place",
"geo": {"@type": "GeoCoordinates",
"latitude": "-6.2697727", "longitude": "107.1165375"}
}
}
],

"image":{"@type":"ImageObject",
"@id":"https://penaadventure.com/#logo",
"url": "https://penaadventure.com/img/logo.png",
"caption":"Inchimediatama Nusantara"}


},

{

"@type":"WebSite",
"@id":"https://penaadventure.com/#website",
"url": "https://penaadventure.com",
"inLanguage":"ru",
"name": "UnixBSDShell",
"publisher":{"@id": "https://penaadventure.com/#organization"},
"potentialAction":{"@type":"SearchAction",
"target":"https://penaadventure.com/?s={search_term_string}",
"query-input":"required name=search_term_string"}
},



{"@type":"WebPage",
"@id":"https://penaadventure.com/#webpage",
"url": "https://penaadventure.com",
"inLanguage":"ru",
"name": "Как установить Ubuntu на FreeBSD | Совместимость двоичных файлов Linux",
"isPartOf":
{"@id":"https://penaadventure.com/#website"},

"image": {
"@type": "ImageObject",
"@id":"https://penaadventure.com/#image",
"width": "1200",
"height": "630",
"url": "https://penaadventure.com",
"caption": "Встроенная в FreeBSD двоичная совместимость Linux позволяет пользователям FreeBSD, работающим на 32-битной архитектуре i386, 64-битной архитектуре amd64 или 64-битной архитектуре arm64"
},

"datePublished": "2024-03-16 14:15:00 +0300",
"dateModified": "2024-03-16 14:15:00 +0300",
"description": "UnixBSDShell",

"breadcrumb":
{"@id":"https://penaadventure.com/#breadcrumb"}
},

{
"@type":"BreadcrumbList",
"@id":"https://penaadventure.com/#breadcrumb",
"itemListElement":[
{"@type":"ListItem",
"position":1,
"item":{"@type":"WebPage",
"@id":"https://penaadventure.com/",
"url": "https://penaadventure.com",
"name": "UnixBSDShell"
}},

{
"@type":"ListItem",
"position":2,
"item":{"@type":"WebPage",
"@id":"https://penaadventure.com/",
"url": "https://penaadventure.com/ru/linux/2024/03/16/freebsd-install-ubuntu-linux-binary/",
"name": "Как установить Ubuntu на FreeBSD | Совместимость двоичных файлов Linux"
}},

{

"@type":"ListItem",
"position":3,
"item":{"@type":"WebPage",
"url": "https://penaadventure.com/ru/linux/2024/03/16/freebsd-install-ubuntu-linux-binary/",
"name": "SysAdmin"
}}

]},



{  "@type": "BlogPosting",
  "url": "https://penaadventure.com/ru/linux/2024/03/16/freebsd-install-ubuntu-linux-binary/",
  "name": "Как установить Ubuntu на FreeBSD | Совместимость двоичных файлов Linux",
  "headline": "Как установить Ubuntu на FreeBSD | Совместимость двоичных файлов Linux",
  "keywords": "SysAdmin",
  "description": "Встроенная в FreeBSD двоичная совместимость Linux позволяет пользователям FreeBSD, работающим на 32-битной архитектуре i386, 64-битной архитектуре amd64 или 64-битной архитектуре arm64",
  "articleBody": "В этой статье обсуждается процедура установки базовой системы Ubuntu во встроенную в FreeBSD бинарную совместимость Linux, чтобы приложения для рабочего стола на базе Ubuntu и Debian, такие как Signal, Spotify и Netflix, могли работать непосредственно на FreeBSD. В обсуждении в этой статье используется Ubuntu 20.04, которая будет установлена ​​в систему FreeBSD 13.2 Stable для 64-битной архитектуры AMD64.\n\nВстроенная в FreeBSD бинарная совместимость Linux позволяет пользователям FreeBSD, работающим на 32-битной архитектуре i386, 64-битной архитектуре amd64 или 64-битной архитектуре arm64, устанавливать и запускать 32-битные и 64-битные двоичные файлы Linux непосредственно на машинах FreeBSD. Это делается с помощью таблиц системных вызовов, что означает, что приложения Linux могут работать без эмуляции или виртуализации. Встроенная в FreeBSD бинарная совместимость Linux была представлена ​​в 90-х годах.\n\nUbuntu Linux Kernel\nПервый шаг, который необходимо сделать для запуска Ubuntu на FreeBSD, — это активировать ядро ​​Ubuntu Linux на машине FreeBSD. По сути, FreeBSD имеет встроенную бинарную совместимость с Linux. Это позволяет запускать двоичные файлы Ubuntu и Linux. Это активируется путем загрузки модуля ядра Linux. Ниже приведен kenel Linux во FreeBSD.\n\nkldload linux\nkldload linux64\nkldload fdescfs\nkldload linprocfs\nkldload tmpfs\nkldload linsysfs\n\n\nЧтобы ядро ​​Linux могло быть активным на машине FreeBSD, чтобы при перезагрузке/перезапуске компьютера ядро ​​могло быть напрямую прочитано FreeBSD. Введите скрипт ядра Linux в файл /boot/loader.conf.\n\nroot@ns1:~ # ee /boot/loader.conf\nlinux_load=\"YES\"\nlinux64_load=\"YES\"      \nfdescfs_load=\"YES\"\nlinprocfs_load=\"YES\"\ntmpfs_load=\"YES\"\nlinsysfs_load=\"YES\"\n\n\nСкрипт выше сделает ядро ​​Ubuntu Linux постоянным в системе FreeBSD. После того, как ядро ​​станет постоянным, создайте скрипт rc.d в файле /etc/rc.conf.\n\nroot@ns1:~ # ee /etc/rc.conf\nkld_list=\"linux linux64 cuse fusefs /boot/modules/i915kms.ko\"\nlinux_enable=\"YES\"\nubuntu_enable=\"YES\"\n\n\nСоздайте скрипт базовой системы Ubuntu rc.d\nВведите следующий скрипт, чтобы начать активацию базовой системы Ubuntu.\n\nroot@ns1:~ # touch /usr/local/etc/rc.d/ubuntu\nroot@ns1:~ # chmod +x /usr/local/etc/rc.d/ubuntu\nroot@ns1:~ # ee /usr/local/etc/rc.d/ubuntu\n#!/bin/sh\n#\n# PROVIDE: ubuntu\n# REQUIRE: archdep mountlate\n# KEYWORD: nojail\n#\n\n. /etc/rc.subr\n\nname=\"ubuntu\"\ndesc=\"Ubuntu for FreeBSD Linux Binary Compatibility\"\nrcvar=\"ubuntu_enable\"\nstart_cmd=\"${name}_start\"\nstop_cmd=\":\"\n\nunmounted()\n{\n  [ `stat -f \"%d\" \"$1\"` == `stat -f \"%d\" \"$1/..\"` -a `stat -f \"%i\" \"$1\"` != `stat -f \"%i\" \"$1/..\"` ]\n}\n\nubuntu_start()\n{\n  local _tmpdir\n  load_kld -e 'linux(aout|elf)' linux\n  case `sysctl -n hw.machine_arch` in\n    amd64)\n      load_kld -e 'linux64elf' linux64\n      ;;\n  esac\n  if [ -x \"/compat/ubuntu/sbin/ldconfigDisabled\" ]; then\n    _tmpdir=`mktemp -d -t linux-ldconfig`\n    /compat/ubuntu/sbin/ldconfig -C ${_tmpdir}/ld.so.cache\n    if ! cmp -s \"${_tmpdir}/ld.so.cache\" \"/compat/ubuntu/etc/ld.so.cache\"; then\n      cat \"${_tmpdir}/ld.so.cache\" &gt; \"/compat/ubuntu/etc/ld.so.cache\"\n    fi\n    rm -rf ${_tmpdir}\n  fi\n  load_kld pty\n  if [ `sysctl -ni kern.elf64.fallback_brand` -eq \"-1\" ]; then\n    sysctl kern.elf64.fallback_brand=3 &gt; /dev/null\n  fi\n  if [ `sysctl -ni kern.elf32.fallback_brand` -eq \"-1\" ]; then\n    sysctl kern.elf32.fallback_brand=3 &gt; /dev/null\n  fi\n  sysctl compat.linux.emul_path=\"/compat/ubuntu\"\n  unmounted \"/compat/ubuntu/dev\" &amp;&amp; (mount -o nocover -t devfs devfs \"/compat/ubuntu/dev\" || exit 1)\n  unmounted \"/compat/ubuntu/dev/fd\" &amp;&amp; (mount -o nocover,linrdlnk -t fdescfs fdescfs \"/compat/ubuntu/dev/fd\" || exit 1)\n  unmounted \"/compat/ubuntu/dev/shm\" &amp;&amp; (mount -o nocover,mode=1777 -t tmpfs tmpfs \"/compat/ubuntu/dev/shm\" || exit 1)\n  unmounted \"/compat/ubuntu/home\" &amp;&amp; (mount -t nullfs /home \"/compat/ubuntu/home\" || exit 1)\n  unmounted \"/compat/ubuntu/proc\" &amp;&amp; (mount -o nocover -t linprocfs linprocfs \"/compat/ubuntu/proc\" || exit 1)\n  unmounted \"/compat/ubuntu/sys\" &amp;&amp; (mount -o nocover -t linsysfs linsysfs \"/compat/ubuntu/sys\" || exit 1)\n  unmounted \"/compat/ubuntu/tmp\" &amp;&amp; (mount -t nullfs /tmp \"/compat/ubuntu/tmp\" || exit 1)\n  unmounted /dev/fd &amp;&amp; (mount -o nocover -t fdescfs fdescfs /dev/fd || exit 1)\n  unmounted /proc &amp;&amp; (mount -o nocover -t procfs procfs /proc || exit 1)\n  true\n}\n\nload_rc_config $name\nrun_rc_command \"$1\"\n\n\nСкрипт выше включит Ubuntu Base System на машине FreeBSD. Поэтому, когда компьютер перезагрузится/перезапустит систему FreeBSD, он автоматически прочитает скрипт Ubuntu Base System выше. Давайте попробуем перезапустить Ubuntu Base System сейчас.\n\nroot@ns1:~ # service ubuntu restart\n\n\nСоздайте каталог совместимости ZFS Datasheet Linux\nZFS Linux datasheets используются для создания снимков, удаления файлов и безопасного удаления всего содержимого тома без нарушения файловой системы каталога FreeBSD. Следуйте сценарию ниже, чтобы создать ZFS datasheet для Linux.\n\nroot@ns1:~ # zfs create -o compression=on -o mountpoint=/compat zroot/compat\nroot@ns1:~ # zfs snapshot -r zroot/compat@2022-04-22\n\n\nЕсли таблица данных ZFS Linux была создана, продолжите созданием каталога для базовой системы Ubuntu.\n\nroot@ns1:~ # mkdir -p /compat/ubuntu/{dev/fd,dev/shm,home,proc,sys,tmp}\n\n\nАктивируйте базовую систему Ubuntu.\n\nroot@ns1:~ # service ubuntu restart\ncompat.linux.emul_path: /compat/ubuntu -&gt; /compat/ubuntu\n\n\nУстановка базовой системы Ubuntu в каталог совместимости Linux\nФайл установки базовой системы Ubuntu — «debootstrap». Этот файл будет использоваться для загрузки и установки базовой системы Ubuntu путем указания цели Ubuntu, например, focal для Focal Fossa, которая является версией Ubuntu 20.04 LTS.\n\nroot@ns1:~ # pkg install linux-sublime-text4\nroot@ns1:~ # pkg install debootstrap\n\n\nЗагрузите и установите Ubuntu Base System в каталог совместимости Linux.\n\nroot@ns1:~ # debootstrap --arch=amd64 --no-check-gpg focal /compat/ubuntu\nI: Configuring netcat-openbsd...\nI: Configuring isc-dhcp-client...\nI: Configuring debconf-i18n...\nI: Configuring vim-tiny...\nI: Configuring ca-certificates...\nI: Configuring libapt-pkg6.0:amd64...\nI: Configuring gir1.2-glib-2.0:amd64...\nI: Configuring whiptail...\nI: Configuring keyboard-configuration...\nI: Configuring libpython3.8-stdlib:amd64...\nI: Configuring python3.8...\nI: Configuring libxml2:amd64...\nI: Configuring libpython3-stdlib:amd64...\nI: Configuring apt...\nI: Configuring apt-utils...\nI: Configuring python3...\nI: Configuring python3-six...\nI: Configuring python3-gi...\nI: Configuring shared-mime-info...\nI: Configuring python3-netifaces...\nI: Configuring lsb-release...\nI: Configuring python3-cffi-backend...\nI: Configuring python3-pkg-resources...\nI: Configuring python3-dbus...\nI: Configuring python3-yaml...\nI: Configuring netplan.io...\nI: Configuring ubuntu-advantage-tools...\nI: Configuring python3-nacl...\nI: Configuring networkd-dispatcher...\nI: Configuring python3-pymacaroons...\nI: Configuring console-setup-linux...\nI: Configuring console-setup...\nI: Configuring kbd...\nI: Configuring ubuntu-minimal...\nI: Configuring libc-bin...\nI: Configuring systemd...\nI: Configuring ca-certificates...\nI: Base system installed successfully.\n\n\nИсправление динамических ссылок (интерпретатор ELF) с помощью символических ссылок.\n\nroot@ns1:~ # cd /compat/ubuntu/lib64/\nroot@ns1:/compat/ubuntu/lib64 # rm ./ld-linux-x86-64.so.2\nroot@ns1:/compat/ubuntu/lib64 # ln -s ../lib/x86_64-linux-gnu/ld-2.31.so ld-linux-x86-64.so.2\n\n\nПерезапустите Ubuntu.\n\nroot@ns1:/compat/ubuntu/lib64 # service linux restart\nroot@ns1:/compat/ubuntu/lib64 # service ubuntu restart\ncompat.linux.emul_path: /compat/ubuntu -&gt; /compat/ubuntu\n\n\nКонфигурация Ubuntu\nЧтобы настроить Ubuntu в системе FreBSD, мы должны войти в chroot jail, который ограничит процесс настройки базовой файловой системой Ubuntu. Если Ubuntu выводит сообщение об отсутствующем идентификаторе группы, это можно проигнорировать. Вы увидите, что командная строка изменится.\n\nroot@ns1:~ # chroot /compat/ubuntu /bin/bash\nroot@ns1:/# printf \"%b\\n\" \"0.0 0 0.0\\n0\\nUTC\" &gt; /etc/adjtime\nroot@ns1:/# dpkg-reconfigure tzdata\n\nCurrent default time zone: 'Asia/Jakarta'\nLocal time is now:      Sun Jul  9 14:31:08 WIB 2023.\nUniversal Time is now:  Sun Jul  9 07:31:08 UTC 2023.\n\nroot@ns1:/# printf \"APT::Cache-Start 251658240;\" &gt; /etc/apt/apt.conf.d/00aptitude\nroot@ns1:/# printf \"APT::Cache-Start 251658240;\" &gt; /etc/apt/apt.conf.d/00aptitude\nroot@ns1:/# printf \"deb http://archive.ubuntu.com/ubuntu/ focal main restricted universe multiverse\" &gt; /etc/apt/sources.list\nroot@ns1:/# exit\nexit\nroot@ns1:~ #\n\n\nЕсли скрипт выше был выполнен, это означает, что мы включили Linux Binary Compatibility на FreeBSD и установили на него базовую систему Ubuntu. С Ubuntu Linux, активным на FreeBSD, теперь мы можем установить репозиторий Ubuntu на FreeBSD. Теперь мы проверим, обновив Ubuntu с помощью базового скрипта Ubuntu, а именно “apt update”.\n\nroot@ns1:~ # chroot /compat/ubuntu /bin/bash\nroot@ns1:/# apt update\nGet:1 http://archive.ubuntu.com/ubuntu focal InRelease [265 kB]\nGet:2 http://archive.ubuntu.com/ubuntu focal/main amd64 Packages [970 kB]\nGet:3 http://archive.ubuntu.com/ubuntu focal/main Translation-en [506 kB]\nGet:4 http://archive.ubuntu.com/ubuntu focal/restricted amd64 Packages [22.0 kB]\nGet:5 http://archive.ubuntu.com/ubuntu focal/restricted Translation-en [6212 B]\nGet:6 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages [8628 kB]\nGet:7 http://archive.ubuntu.com/ubuntu focal/universe Translation-en [5124 kB]                                      \nGet:8 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [144 kB]                                     \nGet:9 http://archive.ubuntu.com/ubuntu focal/multiverse Translation-en [104 kB]                                     \nFetched 15.8 MB in 9s (1715 kB/s)                                                                                   \nReading package lists... Done\nBuilding dependency tree... Done\nAll packages are up to date.\n\n\nИз скрипта выше видно, что все работает нормально. Продолжаем снова, обновляя Ubuntu.\n\nroot@ns1:/# apt list --upgradable\nListing... Done\nroot@ns1:/# apt upgrade\nReading package lists... Done\nBuilding dependency tree... Done\nCalculating upgrade... Done\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nroot@ns1:/# apt autoremove\nReading package lists... Done\nBuilding dependency tree... Done\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nroot@ns1:/# apt clean\nroot@ns1:/#\n\n\nОтлично, все конфигурации в порядке, и Ubuntu нормально работает на машине FreeBSD. Теперь вы можете устанавливать программы на основе Ubuntu на FreeBSD. Для большей убедительности мы тестируем установку приложения NGINX на Ubuntu.\n\nroot@ns1:~ # chroot /compat/ubuntu /bin/bash\nroot@ns1:/# apt update\nHit:1 http://archive.ubuntu.com/ubuntu focal InRelease\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nAll packages are up to date.\nroot@ns1:/# apt install nginx\nReading package lists... Done\nBuilding dependency tree... Done\nThe following additional packages will be installed:\n  fontconfig-config fonts-dejavu-core libfontconfig1 libfreetype6 libgd3 libjbig0 libjpeg-turbo8 libjpeg8\n  libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libpng16-16\n  libtiff5 libwebp6 libx11-6 libx11-data libxau6 libxcb1 libxdmcp6 libxpm4 libxslt1.1 nginx-common nginx-core\nSuggested packages:\n  libgd-tools fcgiwrap nginx-doc ssl-cert\nThe following NEW packages will be installed:\n  fontconfig-config fonts-dejavu-core libfontconfig1 libfreetype6 libgd3 libjbig0 libjpeg-turbo8 libjpeg8\n  libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libpng16-16\n  libtiff5 libwebp6 libx11-6 libx11-data libxau6 libxcb1 libxdmcp6 libxpm4 libxslt1.1 nginx nginx-common nginx-core\n0 upgraded, 25 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 3851 kB of archives.\nAfter this operation, 12.8 MB of additional disk space will be used.\nDo you want to continue? [Y/n] y\n\n\nЧтобы установить приложения Ubuntu на машину FreeBSD, вам следует обратить внимание на изменение командной строки. Рассмотрим следующий пример.\n\nroot@ns1:~ #   \nroot@ns1:~ # chroot /compat/ubuntu /bin/bash\nroot@ns1:/#\n\n\nСкрипт выше объясняет, что root@ns1:~ # — это командная строка FreeBSD, вы не можете запускать приложения Ubuntu в этой командной строке. После запуска команды chroot /compat/ubuntu /bin/bash командная строка изменится на root@ns1:/#, что означает, что мы активны в командной строке Ubuntu и можем устанавливать приложения Ubuntu в командной строке root@ns1:/#.\n",
  "datePublished": "2024-03-16 14:15:00 +0300",
  "dateModified": "2024-03-16 14:15:00 +0300",
  "author": {
    "@type": "Person",
"@id": "https://penaadventure.com/#profilepage",
"name": {"name":"UnixBSDShell's Blog","avatar":"auth/JHW500.jpg","avataralt":"Thank you for visiting our site. Have a nice day!.","bio":"penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.","location":"Moscow, Russia"},
"url": "https://penaadventure.com/about-us",
    "email": {"uri":null,"bitbucket":null,"codeberg":null,"codepen":null,"dribbble":null,"flickr":null,"facebook":null,"foursquare":null,"github":"datainchi@gmail.com","google_plus":null,"instagram":null,"keybase":null,"lastfm":null,"linkedin":"datainchi@gmail.com","mastodon":null,"pinterest":null,"soundcloud":null,"stackoverflow":null,"steemit":null,"steam":null,"tumblr":"datainchi@gmail.com","twitter":null,"vine":null,"weibo":null,"xing":null,"youtube":"datainchi@gmail.com"}
  },
"publisher": {
"@type": "EducationalOrganization",
"@id": "https://penaadventure.com/#organization"  },



  "mainEntityOfPage": {
    "@type": "WebPage",
"@id":"https://penaadventure.com/#webpage"
  },
  "image": {
    "@type": "ImageObject",
"@id":"https://penaadventure.com/#image"
  }
}

]}</script<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SKDSF4Y03H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SKDSF4Y03H');
</script>

    <!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(95806836, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/95806836" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
 
    <!-- Clarity tracking code for https://penaadventure.com/ -->
<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "qrb63393nv");
</script>


<script type="text/javascript">
	atOptions = {
		'key' : '67fb5d6234d340006720e0f69ca5be7f',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//timdinosaur.com/67fb5d6234d340006720e0f69ca5be7f/invoke.js"></script>


<div id="main" role="main"><div class="sidebar sticky"><div itemscope itemtype="http://schema.org/Person">
  <div class="author__avatar"><img src="https://penaadventure.com/images/auth/JHW500.jpg" class="author__avatar" alt="Thank you for visiting our site. Have a nice day!."></div>
  <div class="author__content">
    <h3 class="author__name">UnixBSDShell's Blog</h3><p class="author__bio">penaadventure.com is an online learning platform that provides online tutorials and videos about unix, FreeBSD, OpenBSD and Linux. Not only that, penaadventure.com also presents a variety of topics, including software development, programming, web design, and more. This blog provides various online tutorials and videos for beginners and experienced professionals. This blog also provides a Q&A forum for users to ask questions and get help from other members.</p></div>
  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons"><li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Moscow, Russia</li></ul>
  </div>
</div></div><article class="page" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="headline" content="            Как установить Ubuntu на FreeBSD      Совместимость двоичных файлов Linux      "><meta itemprop="description" content="Встроенная в FreeBSD двоичная совместимость Linux позволяет пользователям FreeBSD, работающим на 32-битной архитектуре i386, 64-битной архитектуре amd64 или 64-битной архитектуре arm64"><meta itemprop="datePublished" content="2024-03-16"><div class="page__inner-wrap"><header><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Posted:</strong> <time datetime="2024-03-16T14:15:00+03:00">2024-03-16</time> </p><h1 class="page__title" itemprop="headline"><table>
  <tbody>
    <tr>
      <td>Как установить Ubuntu на FreeBSD</td>
      <td>Совместимость двоичных файлов Linux</td>
    </tr>
  </tbody>
</table>
</h1></header><section class="page__content" itemprop="text">
        <p>В этой статье обсуждается процедура установки базовой системы Ubuntu во встроенную в FreeBSD бинарную совместимость Linux, чтобы приложения для рабочего стола на базе Ubuntu и Debian, такие как Signal, Spotify и Netflix, могли работать непосредственно на FreeBSD. В обсуждении в этой статье используется Ubuntu 20.04, которая будет установлена ​​в систему FreeBSD 13.2 Stable для 64-битной архитектуры AMD64.</p>

<p>Встроенная в FreeBSD бинарная совместимость Linux позволяет пользователям FreeBSD, работающим на 32-битной архитектуре i386, 64-битной архитектуре amd64 или 64-битной архитектуре arm64, устанавливать и запускать 32-битные и 64-битные двоичные файлы Linux непосредственно на машинах FreeBSD. Это делается с помощью таблиц системных вызовов, что означает, что приложения Linux могут работать без эмуляции или виртуализации. Встроенная в FreeBSD бинарная совместимость Linux была представлена ​​в 90-х годах.</p>

<h2 id="ubuntu-linux-kernel">Ubuntu Linux Kernel</h2>
<p>Первый шаг, который необходимо сделать для запуска Ubuntu на FreeBSD, — это активировать ядро ​​Ubuntu Linux на машине FreeBSD. По сути, FreeBSD имеет встроенную бинарную совместимость с Linux. Это позволяет запускать двоичные файлы Ubuntu и Linux. Это активируется путем загрузки модуля ядра Linux. Ниже приведен kenel Linux во FreeBSD.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kldload linux
kldload linux64
kldload fdescfs
kldload linprocfs
kldload tmpfs
kldload linsysfs
</code></pre></div></div>

<p>Чтобы ядро ​​Linux могло быть активным на машине FreeBSD, чтобы при перезагрузке/перезапуске компьютера ядро ​​могло быть напрямую прочитано FreeBSD. Введите скрипт ядра Linux в файл /boot/loader.conf.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # ee /boot/loader.conf
linux_load="YES"
linux64_load="YES"      
fdescfs_load="YES"
linprocfs_load="YES"
tmpfs_load="YES"
linsysfs_load="YES"
</code></pre></div></div>

<p>Скрипт выше сделает ядро ​​Ubuntu Linux постоянным в системе FreeBSD. После того, как ядро ​​станет постоянным, создайте скрипт rc.d в файле /etc/rc.conf.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # ee /etc/rc.conf
kld_list="linux linux64 cuse fusefs /boot/modules/i915kms.ko"
linux_enable="YES"
ubuntu_enable="YES"
</code></pre></div></div>

<h2 id="создайте-скрипт-базовой-системы-ubuntu-rcd">Создайте скрипт базовой системы Ubuntu rc.d</h2>
<p>Введите следующий скрипт, чтобы начать активацию базовой системы Ubuntu.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # touch /usr/local/etc/rc.d/ubuntu
root@ns1:~ # chmod +x /usr/local/etc/rc.d/ubuntu
root@ns1:~ # ee /usr/local/etc/rc.d/ubuntu
#!/bin/sh
#
# PROVIDE: ubuntu
# REQUIRE: archdep mountlate
# KEYWORD: nojail
#

. /etc/rc.subr

name="ubuntu"
desc="Ubuntu for FreeBSD Linux Binary Compatibility"
rcvar="ubuntu_enable"
start_cmd="${name}_start"
stop_cmd=":"

unmounted()
{
  [ `stat -f "%d" "$1"` == `stat -f "%d" "$1/.."` -a `stat -f "%i" "$1"` != `stat -f "%i" "$1/.."` ]
}

ubuntu_start()
{
  local _tmpdir
  load_kld -e 'linux(aout|elf)' linux
  case `sysctl -n hw.machine_arch` in
    amd64)
      load_kld -e 'linux64elf' linux64
      ;;
  esac
  if [ -x "/compat/ubuntu/sbin/ldconfigDisabled" ]; then
    _tmpdir=`mktemp -d -t linux-ldconfig`
    /compat/ubuntu/sbin/ldconfig -C ${_tmpdir}/ld.so.cache
    if ! cmp -s "${_tmpdir}/ld.so.cache" "/compat/ubuntu/etc/ld.so.cache"; then
      cat "${_tmpdir}/ld.so.cache" &gt; "/compat/ubuntu/etc/ld.so.cache"
    fi
    rm -rf ${_tmpdir}
  fi
  load_kld pty
  if [ `sysctl -ni kern.elf64.fallback_brand` -eq "-1" ]; then
    sysctl kern.elf64.fallback_brand=3 &gt; /dev/null
  fi
  if [ `sysctl -ni kern.elf32.fallback_brand` -eq "-1" ]; then
    sysctl kern.elf32.fallback_brand=3 &gt; /dev/null
  fi
  sysctl compat.linux.emul_path="/compat/ubuntu"
  unmounted "/compat/ubuntu/dev" &amp;&amp; (mount -o nocover -t devfs devfs "/compat/ubuntu/dev" || exit 1)
  unmounted "/compat/ubuntu/dev/fd" &amp;&amp; (mount -o nocover,linrdlnk -t fdescfs fdescfs "/compat/ubuntu/dev/fd" || exit 1)
  unmounted "/compat/ubuntu/dev/shm" &amp;&amp; (mount -o nocover,mode=1777 -t tmpfs tmpfs "/compat/ubuntu/dev/shm" || exit 1)
  unmounted "/compat/ubuntu/home" &amp;&amp; (mount -t nullfs /home "/compat/ubuntu/home" || exit 1)
  unmounted "/compat/ubuntu/proc" &amp;&amp; (mount -o nocover -t linprocfs linprocfs "/compat/ubuntu/proc" || exit 1)
  unmounted "/compat/ubuntu/sys" &amp;&amp; (mount -o nocover -t linsysfs linsysfs "/compat/ubuntu/sys" || exit 1)
  unmounted "/compat/ubuntu/tmp" &amp;&amp; (mount -t nullfs /tmp "/compat/ubuntu/tmp" || exit 1)
  unmounted /dev/fd &amp;&amp; (mount -o nocover -t fdescfs fdescfs /dev/fd || exit 1)
  unmounted /proc &amp;&amp; (mount -o nocover -t procfs procfs /proc || exit 1)
  true
}

load_rc_config $name
run_rc_command "$1"
</code></pre></div></div>

<p>Скрипт выше включит Ubuntu Base System на машине FreeBSD. Поэтому, когда компьютер перезагрузится/перезапустит систему FreeBSD, он автоматически прочитает скрипт Ubuntu Base System выше. Давайте попробуем перезапустить Ubuntu Base System сейчас.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # service ubuntu restart
</code></pre></div></div>

<h2 id="создайте-каталог-совместимости-zfs-datasheet-linux">Создайте каталог совместимости ZFS Datasheet Linux</h2>
<p>ZFS Linux datasheets используются для создания снимков, удаления файлов и безопасного удаления всего содержимого тома без нарушения файловой системы каталога FreeBSD. Следуйте сценарию ниже, чтобы создать ZFS datasheet для Linux.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # zfs create -o compression=on -o mountpoint=/compat zroot/compat
root@ns1:~ # zfs snapshot -r zroot/compat@2022-04-22
</code></pre></div></div>

<p>Если таблица данных ZFS Linux была создана, продолжите созданием каталога для базовой системы Ubuntu.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # mkdir -p /compat/ubuntu/{dev/fd,dev/shm,home,proc,sys,tmp}
</code></pre></div></div>

<p>Активируйте базовую систему Ubuntu.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # service ubuntu restart
compat.linux.emul_path: /compat/ubuntu -&gt; /compat/ubuntu
</code></pre></div></div>

<h2 id="установка-базовой-системы-ubuntu-в-каталог-совместимости-linux">Установка базовой системы Ubuntu в каталог совместимости Linux</h2>
<p>Файл установки базовой системы Ubuntu — «debootstrap». Этот файл будет использоваться для загрузки и установки базовой системы Ubuntu путем указания цели Ubuntu, например, focal для Focal Fossa, которая является версией Ubuntu 20.04 LTS.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # pkg install linux-sublime-text4
root@ns1:~ # pkg install debootstrap
</code></pre></div></div>

<p>Загрузите и установите Ubuntu Base System в каталог совместимости Linux.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # debootstrap --arch=amd64 --no-check-gpg focal /compat/ubuntu
I: Configuring netcat-openbsd...
I: Configuring isc-dhcp-client...
I: Configuring debconf-i18n...
I: Configuring vim-tiny...
I: Configuring ca-certificates...
I: Configuring libapt-pkg6.0:amd64...
I: Configuring gir1.2-glib-2.0:amd64...
I: Configuring whiptail...
I: Configuring keyboard-configuration...
I: Configuring libpython3.8-stdlib:amd64...
I: Configuring python3.8...
I: Configuring libxml2:amd64...
I: Configuring libpython3-stdlib:amd64...
I: Configuring apt...
I: Configuring apt-utils...
I: Configuring python3...
I: Configuring python3-six...
I: Configuring python3-gi...
I: Configuring shared-mime-info...
I: Configuring python3-netifaces...
I: Configuring lsb-release...
I: Configuring python3-cffi-backend...
I: Configuring python3-pkg-resources...
I: Configuring python3-dbus...
I: Configuring python3-yaml...
I: Configuring netplan.io...
I: Configuring ubuntu-advantage-tools...
I: Configuring python3-nacl...
I: Configuring networkd-dispatcher...
I: Configuring python3-pymacaroons...
I: Configuring console-setup-linux...
I: Configuring console-setup...
I: Configuring kbd...
I: Configuring ubuntu-minimal...
I: Configuring libc-bin...
I: Configuring systemd...
I: Configuring ca-certificates...
I: Base system installed successfully.
</code></pre></div></div>

<p>Исправление динамических ссылок (интерпретатор ELF) с помощью символических ссылок.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # cd /compat/ubuntu/lib64/
root@ns1:/compat/ubuntu/lib64 # rm ./ld-linux-x86-64.so.2
root@ns1:/compat/ubuntu/lib64 # ln -s ../lib/x86_64-linux-gnu/ld-2.31.so ld-linux-x86-64.so.2
</code></pre></div></div>

<p>Перезапустите Ubuntu.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:/compat/ubuntu/lib64 # service linux restart
root@ns1:/compat/ubuntu/lib64 # service ubuntu restart
compat.linux.emul_path: /compat/ubuntu -&gt; /compat/ubuntu
</code></pre></div></div>

<h2 id="конфигурация-ubuntu">Конфигурация Ubuntu</h2>
<p>Чтобы настроить Ubuntu в системе FreBSD, мы должны войти в chroot jail, который ограничит процесс настройки базовой файловой системой Ubuntu. Если Ubuntu выводит сообщение об отсутствующем идентификаторе группы, это можно проигнорировать. Вы увидите, что командная строка изменится.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # chroot /compat/ubuntu /bin/bash
root@ns1:/# printf "%b\n" "0.0 0 0.0\n0\nUTC" &gt; /etc/adjtime
root@ns1:/# dpkg-reconfigure tzdata

Current default time zone: 'Asia/Jakarta'
Local time is now:      Sun Jul  9 14:31:08 WIB 2023.
Universal Time is now:  Sun Jul  9 07:31:08 UTC 2023.

root@ns1:/# printf "APT::Cache-Start 251658240;" &gt; /etc/apt/apt.conf.d/00aptitude
root@ns1:/# printf "APT::Cache-Start 251658240;" &gt; /etc/apt/apt.conf.d/00aptitude
root@ns1:/# printf "deb http://archive.ubuntu.com/ubuntu/ focal main restricted universe multiverse" &gt; /etc/apt/sources.list
root@ns1:/# exit
exit
root@ns1:~ #
</code></pre></div></div>

<p>Если скрипт выше был выполнен, это означает, что мы включили Linux Binary Compatibility на FreeBSD и установили на него базовую систему Ubuntu. С Ubuntu Linux, активным на FreeBSD, теперь мы можем установить репозиторий Ubuntu на FreeBSD. Теперь мы проверим, обновив Ubuntu с помощью базового скрипта Ubuntu, а именно “apt update”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # chroot /compat/ubuntu /bin/bash
root@ns1:/# apt update
Get:1 http://archive.ubuntu.com/ubuntu focal InRelease [265 kB]
Get:2 http://archive.ubuntu.com/ubuntu focal/main amd64 Packages [970 kB]
Get:3 http://archive.ubuntu.com/ubuntu focal/main Translation-en [506 kB]
Get:4 http://archive.ubuntu.com/ubuntu focal/restricted amd64 Packages [22.0 kB]
Get:5 http://archive.ubuntu.com/ubuntu focal/restricted Translation-en [6212 B]
Get:6 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages [8628 kB]
Get:7 http://archive.ubuntu.com/ubuntu focal/universe Translation-en [5124 kB]                                      
Get:8 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [144 kB]                                     
Get:9 http://archive.ubuntu.com/ubuntu focal/multiverse Translation-en [104 kB]                                     
Fetched 15.8 MB in 9s (1715 kB/s)                                                                                   
Reading package lists... Done
Building dependency tree... Done
All packages are up to date.
</code></pre></div></div>

<p>Из скрипта выше видно, что все работает нормально. Продолжаем снова, обновляя Ubuntu.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:/# apt list --upgradable
Listing... Done
root@ns1:/# apt upgrade
Reading package lists... Done
Building dependency tree... Done
Calculating upgrade... Done
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
root@ns1:/# apt autoremove
Reading package lists... Done
Building dependency tree... Done
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
root@ns1:/# apt clean
root@ns1:/#
</code></pre></div></div>

<p>Отлично, все конфигурации в порядке, и Ubuntu нормально работает на машине FreeBSD. Теперь вы можете устанавливать программы на основе Ubuntu на FreeBSD. Для большей убедительности мы тестируем установку приложения NGINX на Ubuntu.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ # chroot /compat/ubuntu /bin/bash
root@ns1:/# apt update
Hit:1 http://archive.ubuntu.com/ubuntu focal InRelease
Reading package lists... Done
Building dependency tree       
Reading state information... Done
All packages are up to date.
root@ns1:/# apt install nginx
Reading package lists... Done
Building dependency tree... Done
The following additional packages will be installed:
  fontconfig-config fonts-dejavu-core libfontconfig1 libfreetype6 libgd3 libjbig0 libjpeg-turbo8 libjpeg8
  libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libpng16-16
  libtiff5 libwebp6 libx11-6 libx11-data libxau6 libxcb1 libxdmcp6 libxpm4 libxslt1.1 nginx-common nginx-core
Suggested packages:
  libgd-tools fcgiwrap nginx-doc ssl-cert
The following NEW packages will be installed:
  fontconfig-config fonts-dejavu-core libfontconfig1 libfreetype6 libgd3 libjbig0 libjpeg-turbo8 libjpeg8
  libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libpng16-16
  libtiff5 libwebp6 libx11-6 libx11-data libxau6 libxcb1 libxdmcp6 libxpm4 libxslt1.1 nginx nginx-common nginx-core
0 upgraded, 25 newly installed, 0 to remove and 0 not upgraded.
Need to get 3851 kB of archives.
After this operation, 12.8 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
</code></pre></div></div>

<p>Чтобы установить приложения Ubuntu на машину FreeBSD, вам следует обратить внимание на изменение командной строки. Рассмотрим следующий пример.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ns1:~ #   
root@ns1:~ # chroot /compat/ubuntu /bin/bash
root@ns1:/#
</code></pre></div></div>

<p>Скрипт выше объясняет, что root@ns1:~ # — это командная строка FreeBSD, вы не можете запускать приложения Ubuntu в этой командной строке. После запуска команды chroot /compat/ubuntu /bin/bash командная строка изменится на root@ns1:/#, что означает, что мы активны в командной строке Ubuntu и можем устанавливать приложения Ubuntu в командной строке root@ns1:/#.</p>
</section>
      <footer class="page__meta"><script type="text/javascript">
	atOptions = {
		'key' : '9f0fbeed81ad3c9bfba81d92c5429c29',
		'format' : 'iframe',
		'height' : 60,
		'width' : 468,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//timdinosaur.com/9f0fbeed81ad3c9bfba81d92c5429c29/invoke.js"></script>


        <p class="page__date"><strong><i class="fa fa-fw fa-creative-commons" aria-hidden="true"></i> License: </strong> <a href="https://creativecommons.org/licenses/by/4.0/">By:</a> UnixBSDShell's Blog</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Posted:</strong> <time datetime="2024-03-16T14:15:00+03:00">2024-03-16</time></p><p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords"><a href="https://penaadventure.com/tags/#sysadmin" class="page__taxonomy-item" rel="tag">SysAdmin</a></span>
  </p><p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords"><a href="https://penaadventure.com/categories/#linux" class="page__taxonomy-item" rel="tag">Linux</a><span class="sep">, </span><a href="https://penaadventure.com/categories/#ru" class="page__taxonomy-item" rel="tag">ru</a></span>
  </p></footer><nav class="pagination"><a href="https://penaadventure.com/ru/freebsd/2024/02/15/freebsd-magento-adobe-commerce-php-apache/" class="pagination--pager" title="Настройка FreeBSD Magento Adobe Commerce с PHP Composer и Apache
">Previous</a><a href="https://penaadventure.com/ru/freebsd/2024/04/26/freebsd-nextcloud-elasticsearch-app-store/" class="pagination--pager" title="FreeBSD Elasticsearch — как включить полнотекстовый поиск в App Store в NextCloud
">Next</a></nav></div>
  </article></div><div class="page__footer">
      <footer><!-- start custom footer snippets -->
<!-- end custom footer snippets --><div class="page__footer-follow">
  <ul class="social-icons"><li><a href="https://x.com/iwanset96143401"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li><li><a href="feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Atom Feed</a></li>
    <li><a href="https://penaadventure.com/about/"><i class="fa fa-fw fa-user" aria-hidden="true"></i> About Us</a></li>
  </ul>
</div>
<div class="page__footer-copyright">&copy; 2025 UnixBSDShell. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://www.inchimediatama.org/" rel="dofollow">Minimal Mistakes</a>.</div>
</footer>
    </div><script src="https://penaadventure.com/assets/js/main.min.js"></script></body>
</html>